{"version":3,"sources":["_helpers/history.ts","_reducers/authentication.reducer.ts","_reducers/data.reducer.ts","_reducers/alert.reducer.ts","_reducers/util.reducer.ts","_reducers/index.ts","_utils/types.ts","_reducers/registration.reducer.ts","_reducers/users.reducer.ts","_helpers/store.ts","_helpers/auth-header.ts","_helpers/fake-backend.js","_actions/alert.actions.ts","_services/user.service.js","_services/data.service.js","_actions/user.actions.ts","_actions/data.actions.ts","_actions/util.actions.ts","_components/PrivateRoute.jsx","_components/MainPanel.tsx","_components/Input.tsx","_pages/DatasetPage.tsx","_components/LabelButton.tsx","_components/Token.tsx","_components/Sentence.tsx","_components/Annotate.tsx","_pages/DocumentPage.tsx","_pages/HomePage.tsx","_pages/LoginPage.tsx","_pages/RegisterPage.jsx","App/App.jsx","index.jsx"],"names":["history","createBrowserHistory","basename","process","initialState","loggedIn","user","JSON","parse","localStorage","getItem","loggingIn","emptyState","username","access_token","words","labels","labelset","path","isAnnotated","suggestions","datasetName","documentList","annotatedDocumentSet","Set","datasetIDs","wordsColor","type","message","formState","password","rootReducer","combineReducers","authentication","state","action","registration","registering","users","data","newLabels","alert","util","newState","loggerMiddleware","createLogger","store","createStore","composeWithDevTools","applyMiddleware","thunkMiddleware","authHeader","Authorization","alldata","dataset1","doc1","sentences","split","doc2","news_set","news1","news2","alertActions","success","error","clear","userService","login","requestOptions","method","headers","body","stringify","fetch","then","handleResponse","console","log","setItem","logout","register","getAll","getById","id","update","delete","removeItem","response","text","ok","status","statusText","Promise","reject","dataService","getDatasets","saveDocument","loadDocument","dataset","docid","getDocuments","userActions","dispatch","push","failure","toString","request","dataActions","redirectToLogin","loadStatus","docId","setLabels","clearDocument","error_text","setTimeout","changeForm","PrivateRoute","Component","component","rest","render","props","to","pathname","from","location","MainPanel","this","match","params","datasetid","Navbar","bg","expand","fixed","Container","Brand","href","alt","src","height","className","Toggle","aria-controls","Collapse","Text","hideLoginButton","userName","children","React","connectedMainPanel","withRouter","connect","Input","changeInput","bind","event","value","target","name","handleChange","label","model","fsv","Form","Group","Label","Control","defaultValue","onChange","connectedInput","values","DatasetPage","length","ListGroup","map","index","Item","key","variant","indexOf","undefined","Badge","actionCreators","connectedDocumentPage","LabelButton","Button","onClick","bsPrefix","join","style","background","color","Token","myRef","createRef","evt","buttons","mouseup","document","addEventListener","_handleContextMenu","preventDefault","button","classList","contains","mousedown","set_label","tag","pop","labellist","Object","keys","sort","oindex","splice","label_button_list","spacer_list","spacer_style","next_token_is_entity","selected","class_list","onMouseDown","handleDown","onMouseUp","handleUp","onMouseOver","handleOver","ref","form","Overlay","show","show_popover","current","placement","transition","Popover","Title","display_phrase","rel","Content","connectedToken","Sentence","mouseIsDown","selected_range","popover_index","prevDoc","nextDoc","rowMouseDown","rowMouseUp","isActive","start","end","setState","updateRange","setFocus","tagName","checkClearRange","tgt","i","first","last","tmp","highlighted_phrase","sent","slice","tok","selected_keyword","tokenDown","tokenUp","showPopoverFunc","Annotate","activeSent","isSaved","propagate","loadAll","arr","subarr","from_index","sl","l","inds","loop","j","toLowerCase","sent_index","word_slice","phrase_locations","find_csa","forEach","ind","cloneDeep","tuple","phrase_sent","phrase_start","phrase_end","pref","next","startsWith","newDoc","hasLabel","confirmed","window","confirm","url","doc_index","Row","Col","md","Card","Body","lab","setLabel","sendLabels","Check","checked","defaultChecked","ButtonGroup","buttonPush","uplink","Table","striped","bordered","hover","size","s","connectedAnnotate","DocumentPage","HomePage","Jumbotron","connectedDatasetPage","LoginPage","handleSubmit","e","msg","onSubmit","connectedLoginPage","RegisterPage","firstName","lastName","submitted","htmlFor","App","listen","clearAlerts","exact","connectedApp","realFetch","opts","resolve","endsWith","responseJson","urlParts","URLSearchParams","get","documentIDs","annotatedDocumentIDs","urlParams","PER","LOC","ORG","O","configureFakeBackend","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.4e1102a5.chunk.js","sourcesContent":["import { createBrowserHistory } from \"history\";\n\n// https://stackoverflow.com/questions/49429906/how-should-i-configure-create-react-app-to-serve-app-from-subdirectory\nexport const history = createBrowserHistory({\n  basename: process.env.PUBLIC_URL,\n});\n","import {\n  AuthTypes,\n  AuthState,\n  LOGIN_FAILURE,\n  LOGIN_REQUEST,\n  LOGIN_SUCCESS,\n  LOGOUT,\n} from \"../_utils/types\";\n\n//'username':'', 'access_token': ''\nlet user = JSON.parse(localStorage.getItem(\"user\") || \"{}\");\nconst initialState = {\n  loggedIn: false, // TODO: how to tell if someone is logged in or not? Answer: it might not matter... all of that is handled on the backend. If that's the case, then we can delete loggedIn and loggingIn here.\n  user: user,\n  loggingIn: false,\n};\n\nconst emptyState = {\n  loggedIn: false,\n  loggingIn: false,\n  user: {\n    username: \"\",\n    access_token: \"\",\n  },\n};\n\nexport function authentication(\n  state = initialState,\n  action: AuthTypes\n): AuthState {\n  switch (action.type) {\n    case LOGIN_REQUEST:\n      return {\n        ...state,\n        loggingIn: true,\n        user: action.user,\n      };\n    case LOGIN_SUCCESS:\n      return {\n        loggingIn: false,\n        loggedIn: true,\n        user: action.user,\n      };\n    case LOGIN_FAILURE:\n      return emptyState;\n    case LOGOUT:\n      return emptyState;\n    default:\n      return state;\n  }\n}\n","import {\n  DataTypes,\n  DataState,\n  GETDATASETS_SUCCESS,\n  GETDOCS_SUCCESS,\n  LOADDOC_SUCCESS,\n  SETLABELS,\n  CLEARDOC,\n} from \"../_utils/types\";\n\nconst initialState: DataState = {\n  words: [[]],\n  labels: [[]],\n  labelset: [],\n  path: \"\",\n  isAnnotated: false,\n  suggestions: [],\n  datasetName: \"\",\n  documentList: [],\n  annotatedDocumentSet: new Set(),\n  datasetIDs: [],\n  wordsColor: \"black\",\n};\n\nexport function data(state = initialState, action: DataTypes): DataState {\n  switch (action.type) {\n    case GETDATASETS_SUCCESS:\n      return {\n        ...state,\n        datasetIDs: action.data[\"datasetIDs\"],\n        documentList: [],\n        datasetName: \"\",\n        annotatedDocumentSet: new Set(),\n      };\n    case GETDOCS_SUCCESS:\n      return {\n        ...state,\n        datasetName: action.data[\"datasetID\"],\n        documentList: action.data[\"documentIDs\"],\n        annotatedDocumentSet: action.data[\"annotatedDocumentIDs\"],\n      };\n    case LOADDOC_SUCCESS:\n      return {\n        ...state,\n        words: action.data[\"sentences\"],\n        labels: action.data[\"labels\"],\n        labelset: action.data[\"labelset\"],\n        path: action.data[\"path\"],\n        isAnnotated: action.data[\"isAnnotated\"],\n        suggestions: action.data[\"suggestions\"],\n        wordsColor: \"black\",\n      };\n    case CLEARDOC:\n      return {\n        ...state,\n        wordsColor: \"silver\",\n      };\n    case SETLABELS:\n      return {\n        ...state,\n        labels: action.newLabels,\n      };\n    default:\n      return state;\n  }\n}\n","import {\n  MessageTypes,\n  ALERT_SUCCESS,\n  ALERT_ERROR,\n  ALERT_CLEAR,\n} from \"../_utils/types\";\n\ninterface AlertState {\n  type: string;\n  message: string;\n}\n\nconst initialState: AlertState = {\n  type: \"\",\n  message: \"\",\n};\n\nexport function alert(state = initialState, action: MessageTypes): AlertState {\n  switch (action.type) {\n    case ALERT_SUCCESS:\n      return {\n        type: \"alert-success\",\n        message: action.message,\n      };\n    case ALERT_ERROR:\n      return {\n        type: \"alert-danger\",\n        message: action.message,\n      };\n    case ALERT_CLEAR:\n      return { type: \"\", message: \"\" };\n    default:\n      return state;\n  }\n}\n","import { UtilTypes, UtilState, CHANGE_FORM } from \"../_utils/types\";\n\nconst initialState: UtilState = {\n  formState: {\n    username: \"\",\n    password: \"\",\n  },\n};\n\nexport function util(state = initialState, action: UtilTypes): UtilState {\n  switch (action.type) {\n    case CHANGE_FORM:\n      return {\n        formState: {\n          ...state.formState,\n          ...action.newState,\n        },\n      };\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from \"redux\";\n\nimport { authentication } from \"./authentication.reducer\";\nimport { registration } from \"./registration.reducer\";\nimport { users } from \"./users.reducer\";\nimport { data } from \"./data.reducer\";\nimport { alert } from \"./alert.reducer\";\nimport { util } from \"./util.reducer\";\n\nconst rootReducer = combineReducers({\n  authentication,\n  registration,\n  users,\n  data,\n  alert,\n  util,\n});\n\nexport default rootReducer;\n","export interface User {\n  username: string;\n  access_token: string;\n}\n\nexport interface AuthState {\n  loggedIn: boolean;\n  loggingIn: boolean;\n  user: User;\n}\n\nexport interface DataState {\n  datasetName: string;\n  documentList: string[];\n  annotatedDocumentSet: Set<string>;\n  words: string[][];\n  labels: string[][];\n  labelset: any;\n  path: string;\n  isAnnotated: boolean;\n  suggestions: any[];\n  datasetIDs: string[];\n  wordsColor: string;\n}\n\nexport interface UtilState {\n  formState: {\n    [key: string]: number | string;\n  };\n}\n\nexport interface State {\n  authentication: AuthState;\n  // loggedIn: boolean;\n  // userName: string;\n  // dataset: string;\n\n  // currentlySending: boolean;\n  util: UtilState;\n  errorMessage: string;\n  data: DataState;\n  // TODO: include AlertState here somehow?\n}\n\nexport const LOAD_DOCUMENT = \"LOAD_DOCUMENT\";\nexport const SAVE_DOCUMENT = \"SAVE_DOCUMENT\";\nexport const CHANGE_FORM = \"CHANGE_FORM\";\nexport const SET_AUTH = \"SET_AUTH\";\nexport const SENDING_REQUEST = \"SENDING_REQUEST\";\nexport const LOADING_AUTH = \"LOADING_AUTH\";\nexport const SET_ERROR_MESSAGE = \"SET_ERROR_MESSAGE\";\nexport const SET_DATA = \"SET_DATA\";\nexport const ALERT_SUCCESS = \"ALERT_SUCCESS\";\nexport const ALERT_ERROR = \"ALERT_ERROR\";\nexport const ALERT_CLEAR = \"ALERT_CLEAR\";\nexport const REGISTER_REQUEST = \"DATA_REGISTER_REQUEST\";\nexport const REGISTER_SUCCESS = \"DATA_REGISTER_SUCCESS\";\nexport const REGISTER_FAILURE = \"DATA_REGISTER_FAILURE\";\nexport const LOGIN_REQUEST = \"DATA_LOGIN_REQUEST\";\nexport const LOGIN_SUCCESS = \"DATA_LOGIN_SUCCESS\";\nexport const LOGIN_FAILURE = \"DATA_LOGIN_FAILURE\";\nexport const LOGOUT = \"DATA_LOGOUT\";\nexport const GETALL_REQUEST = \"DATA_GETALL_REQUEST\";\nexport const GETALL_SUCCESS = \"DATA_GETALL_SUCCESS\";\nexport const GETALL_FAILURE = \"DATA_GETALL_FAILURE\";\nexport const GETDATASETS_SUCCESS = \"GETDATASETS_SUCCESS\";\nexport const GETDOCS_SUCCESS = \"GETDOCS_SUCCESS\";\nexport const LOADDOC_SUCCESS = \"LOADDOC_SUCCESS\";\nexport const CLEARDOC = \"CLEARDOC\";\nexport const SAVEDOC_SUCCESS = \"SAVEDOC_SUCCESS\";\nexport const LOADSTATUS = \"LOADSTATUS\";\nexport const SETLABELS = \"SETLABELS\";\nexport const DELETE_REQUEST = \"DATA_DELETE_REQUEST\";\nexport const DELETE_SUCCESS = \"DATA_DELETE_SUCCESS\";\nexport const DELETE_FAILURE = \"DATA_DELETE_FAILURE\";\n\ninterface ChangeFormAction {\n  type: typeof CHANGE_FORM;\n  newState: any; // FIXME: any\n}\n\ninterface LoadDocumentAction {\n  type: typeof LOAD_DOCUMENT;\n  docid: string;\n  dataset: string;\n}\ninterface SaveDocumentAction {\n  type: typeof SAVE_DOCUMENT;\n  docid: string;\n  dataset: string;\n}\ninterface SetAuthAction {\n  type: typeof SET_AUTH;\n  newState: boolean;\n  username: string | null;\n}\n\ninterface SuccessAction {\n  type: typeof ALERT_SUCCESS;\n  message: string;\n}\ninterface ErrorAction {\n  type: typeof ALERT_ERROR;\n  message: string;\n}\ninterface ClearAction {\n  type: typeof ALERT_CLEAR;\n}\n\ninterface GetDatasetsAction {\n  type: typeof GETDATASETS_SUCCESS;\n  data: {\n    datasetIDs: string[];\n  };\n}\n\ninterface GetDocsAction {\n  type: typeof GETDOCS_SUCCESS;\n  data: {\n    documentIDs: string[];\n    annotatedDocumentIDs: Set<string>;\n    datasetID: string;\n  };\n}\n\ninterface RegisterRequestAction {\n  type: typeof REGISTER_REQUEST;\n  registering: boolean;\n}\n\ninterface RegisterSuccessAction {\n  type: typeof REGISTER_SUCCESS;\n}\n\ninterface RegisterFailureAction {\n  type: typeof REGISTER_FAILURE;\n}\n\ninterface LoadStatusAction {\n  type: typeof LOADSTATUS;\n  data: {\n    documentIDs: string[];\n  };\n  docId: string;\n}\n\ninterface LoadDocsAction {\n  type: typeof LOADDOC_SUCCESS;\n  data: {\n    sentences: string[][];\n    labels: string[][];\n    path: string;\n    isAnnotated: boolean;\n    labelset: any;\n    suggestions: any[];\n  };\n}\n\ninterface ClearDocAction {\n  type: typeof CLEARDOC;\n}\n\ninterface SetLabelsAction {\n  type: typeof SETLABELS;\n  newLabels: any[];\n}\n\ninterface LoginRequestAction {\n  type: typeof LOGIN_REQUEST;\n  user: User;\n}\n\ninterface LoginSuccessAction {\n  type: typeof LOGIN_SUCCESS;\n  user: User;\n}\n\ninterface LoginFailureAction {\n  type: typeof LOGIN_FAILURE;\n  error: string;\n}\n\ninterface LogoutAction {\n  type: typeof LOGOUT;\n}\n\nexport type RegistrationTypes =\n  | RegisterRequestAction\n  | RegisterSuccessAction\n  | RegisterFailureAction;\nexport type AuthTypes =\n  | LoginRequestAction\n  | LoginSuccessAction\n  | LoginFailureAction\n  | LogoutAction;\nexport type DataTypes =\n  | GetDatasetsAction\n  | GetDocsAction\n  | LoadStatusAction\n  | LoadDocsAction\n  | SetLabelsAction\n  | ClearDocAction;\nexport type UtilTypes = ChangeFormAction;\nexport type MessageTypes = SuccessAction | ErrorAction | ClearAction;\nexport type DocumentTypes =\n  | LoadDocumentAction\n  | SaveDocumentAction\n  | SetAuthAction;\n","import {\n  REGISTER_SUCCESS,\n  REGISTER_FAILURE,\n  REGISTER_REQUEST,\n  RegistrationTypes,\n} from \"../_utils/types\";\n\nexport function registration(state = {}, action: RegistrationTypes) {\n  switch (action.type) {\n    case REGISTER_REQUEST:\n      return { registering: true };\n    case REGISTER_SUCCESS:\n      return {};\n    case REGISTER_FAILURE:\n      return {};\n    default:\n      return state;\n  }\n}\n","// import {\n// GETALL_FAILURE,\n// GETALL_SUCCESS,\n// GETALL_REQUEST,\n// DELETE_SUCCESS,\n// DELETE_REQUEST,\n// DELETE_FAILURE,\n// userTypes\n// } from \"../_utils/types\";\n\nexport function users(state = {}, action: any) {\n  switch (action.type) {\n    //   case GETALL_REQUEST:\n    //     return {\n    //       loading: true,\n    //     };\n    //   case GETALL_SUCCESS:\n    //     return {\n    //       items: action.users,\n    //     };\n    //   case GETALL_FAILURE:\n    //     return {\n    //       error: action.error,\n    //     };\n    //   case DELETE_REQUEST:\n    //     // add 'deleting:true' property to user being deleted\n    //     return {\n    //       ...state,\n    //       items: state.items.map((user) =>\n    //         user.id === action.id ? { ...user, deleting: true } : user\n    //       ),\n    //     };\n    //   case DELETE_SUCCESS:\n    //     // remove deleted user from state\n    //     return {\n    //       items: state.items.filter((user) => user.id !== action.id),\n    //     };\n    //   case DELETE_FAILURE:\n    //     // remove 'deleting:true' property and add 'deleteError:[error]' property to user\n    //     return {\n    //       ...state,\n    //       items: state.items.map((user) => {\n    //         if (user.id === action.id) {\n    //           // make copy of user without 'deleting:true' property\n    //           const { deleting, ...userCopy } = user;\n    //           // return copy of user with 'deleteError:[error]' property\n    //           return { ...userCopy, deleteError: action.error };\n    //         }\n\n    //         return user;\n    //       }),\n    //     };\n    default:\n      return state;\n  }\n}\n","import { createStore, applyMiddleware } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport thunkMiddleware from \"redux-thunk\";\nimport { createLogger } from \"redux-logger\";\nimport rootReducer from \"../_reducers\";\n\nconst loggerMiddleware = createLogger();\n\nexport const store = createStore(\n  rootReducer,\n  composeWithDevTools(applyMiddleware(thunkMiddleware, loggerMiddleware))\n);\n","export function authHeader() {\n  // return authorization header with jwt token\n  let user = JSON.parse(localStorage.getItem(\"user\") || \"\");\n  if (user && user.access_token) {\n    return { Authorization: \"JWT \" + user.access_token };\n  } else {\n    return {};\n  }\n}\n","let alldata = {\n  dataset1: {\n    doc1: {\n      sentences: [\n        \"Johnny Depp stayed at the Paris Hilton , reports CNN .\".split(\" \"),\n        \"New York City is in New York , which is in the United States .\".split(\n          \" \"\n        ),\n        \"Other states in the United States include Montana , Indiana , and New Jersey .\".split(\n          \" \"\n        ),\n        \"England draw dull Denmark game .\".split(\" \"),\n      ],\n      labels: [\n        \"OOOOOOOOOOO\".split(\"\"),\n        \"OOOOOOOOOOOOOOO\".split(\"\"),\n        \"OOOOOOOOOOOOOOO\".split(\"\"),\n        \"OOOOOO\".split(\"\"),\n      ],\n    },\n    doc2: {\n      sentences: [\n        \"Johnny Depp stayed at the Paris Hilton , reports CNN .\".split(\" \"),\n        \"New York City is in New York , which is in the United States .\".split(\n          \" \"\n        ),\n        \"England draw dull Denmark game .\".split(\" \"),\n      ],\n      labels: [\n        \"OOOOOOOOOOO\".split(\"\"),\n        \"OOOOOOOOOOOOOOO\".split(\"\"),\n        \"OOOOOO\".split(\"\"),\n      ],\n    },\n  },\n  news_set: {\n    news1: {\n      sentences: [\n        \"Johnny Depp stayed at the Paris Hilton , reports CNN .\".split(\" \"),\n        \"New York City is in New York , which is in the United States .\".split(\n          \" \"\n        ),\n        \"England draw dull Denmark game .\".split(\" \"),\n      ],\n      labels: [\n        \"OOOOOOOOOOO\".split(\"\"),\n        \"OOOOOOOOOOOOOOO\".split(\"\"),\n        \"OOOOOO\".split(\"\"),\n      ],\n    },\n    news2: {\n      sentences: [\n        \"Johnny Depp stayed at the Paris Hilton , reports CNN .\".split(\" \"),\n        \"New York City is in New York , which is in the United States .\".split(\n          \" \"\n        ),\n        \"England draw dull Denmark game .\".split(\" \"),\n      ],\n      labels: [\n        \"OOOOOOOOOOO\".split(\"\"),\n        \"OOOOOOOOOOOOOOO\".split(\"\"),\n        \"OOOOOO\".split(\"\"),\n      ],\n    },\n  },\n};\n\nexport function configureFakeBackend() {\n  let realFetch = window.fetch;\n  window.fetch = function (url, opts) {\n    return new Promise((resolve, reject) => {\n      // wrap in timeout to simulate server api call\n      setTimeout(() => {\n        // authenticate\n        if (url.endsWith(\"/users/authenticate\") && opts.method === \"POST\") {\n          let responseJson = {\n            id: 0,\n            username: \"test_user\",\n            firstName: \"Test\",\n            lastName: \"User\",\n          };\n          resolve({\n            ok: true,\n            text: () => Promise.resolve(JSON.stringify(responseJson)),\n          });\n\n          return;\n        }\n\n        if (url.endsWith(\"/datasetlist\") && opts.method === \"GET\") {\n          let responseJson = {\n            datasetIDs: Object.keys(alldata),\n          };\n          resolve({\n            ok: true,\n            text: () => Promise.resolve(JSON.stringify(responseJson)),\n          });\n          return;\n        }\n\n        if (url.indexOf(\"loaddataset\") > -1 && opts.method === \"GET\") {\n          let urlParts = url.split(\"?\");\n          const urlParams = new URLSearchParams(urlParts[urlParts.length - 1]);\n          let dataset = urlParams.get(\"dataset\");\n\n          let responseJson = {\n            documentIDs: Object.keys(alldata[dataset]),\n            annotatedDocumentIDs: [],\n          };\n          resolve({\n            ok: true,\n            text: () => Promise.resolve(JSON.stringify(responseJson)),\n          });\n          return;\n        }\n\n        if (url.indexOf(\"loaddoc\") > -1 && opts.method === \"GET\") {\n          let urlParts = url.split(\"?\");\n          const urlParams = new URLSearchParams(urlParts[urlParts.length - 1]);\n          let dataset = urlParams.get(\"dataset\");\n          let docid = urlParams.get(\"docid\");\n\n          let responseJson = alldata[dataset][docid];\n          responseJson.labelset = {\n            PER: \"yellow\",\n            LOC: \"yellowgreen\",\n            ORG: \"lightblue\",\n            O: \"transparent\",\n          };\n\n          resolve({\n            ok: true,\n            text: () => Promise.resolve(JSON.stringify(responseJson)),\n          });\n          return;\n        }\n\n        if (url.indexOf(\"savedoc\") > -1) {\n          let responseJson = {\n            msg: \"Saved correctly.\",\n          };\n          resolve({\n            ok: true,\n            text: () => Promise.resolve(JSON.stringify(responseJson)),\n          });\n          return;\n        }\n\n        // pass through any requests not handled above\n        realFetch(url, opts).then((response) => resolve(response));\n      }, 10);\n    });\n  };\n}\n","import {\n  MessageTypes,\n  ALERT_SUCCESS,\n  ALERT_CLEAR,\n  ALERT_ERROR,\n} from \"../_utils/types\";\n\nexport const alertActions = {\n  success,\n  error,\n  clear,\n};\n\nfunction success(message: string): MessageTypes {\n  return { type: ALERT_SUCCESS, message };\n}\n\nfunction error(message: string): MessageTypes {\n  return { type: ALERT_ERROR, message };\n}\n\nfunction clear(): MessageTypes {\n  return { type: ALERT_CLEAR };\n}\n","import { authHeader } from \"../_helpers\";\n\nexport const userService = {\n  login,\n  logout,\n  register,\n  getAll,\n  getById,\n  update,\n  delete: _delete,\n};\n\nfunction login(username, password) {\n  const requestOptions = {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ username, password }),\n  };\n\n  return fetch(`http://localhost:5000/users/authenticate`, requestOptions)\n    .then(handleResponse)\n    .then((user) => {\n      // store user details and jwt token in local storage to keep user logged in between page refreshes\n      console.log(user);\n      localStorage.setItem(\"user\", JSON.stringify(user));\n\n      return user;\n    });\n}\n\nfunction logout() {\n  // remove user from local storage to log user out\n  localStorage.removeItem(\"user\");\n}\n\nfunction getAll() {\n  const requestOptions = {\n    method: \"GET\",\n    headers: authHeader(),\n  };\n\n  return fetch(`http://localhost:5000/users`, requestOptions).then(\n    handleResponse\n  );\n}\n\nfunction getById(id) {\n  const requestOptions = {\n    method: \"GET\",\n    headers: authHeader(),\n  };\n\n  return fetch(`http://localhost:5000/users/${id}`, requestOptions).then(\n    handleResponse\n  );\n}\n\nfunction register(user) {\n  const requestOptions = {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(user),\n  };\n\n  return fetch(`http://localhost:5000/users/register`, requestOptions).then(\n    handleResponse\n  );\n}\n\nfunction update(user) {\n  const requestOptions = {\n    method: \"PUT\",\n    headers: { ...authHeader(), \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(user),\n  };\n\n  return fetch(`http://localhost:5000/users/${user.id}`, requestOptions).then(\n    handleResponse\n  );\n}\n\n// prefixed function name with underscore because delete is a reserved word in javascript\nfunction _delete(id) {\n  const requestOptions = {\n    method: \"DELETE\",\n    headers: authHeader(),\n  };\n\n  return fetch(`http://localhost:5000/users/${id}`, requestOptions).then(\n    handleResponse\n  );\n}\n\nfunction handleResponse(response) {\n  return response.text().then((text) => {\n    const data = text && JSON.parse(text);\n    if (!response.ok) {\n      if (response.status === 401) {\n        // auto logout if 401 response returned from api\n        logout();\n        // This is unsupported in Typescript?\n        //location.reload(true);\n      }\n\n      const error = (data && data.message) || response.statusText;\n      return Promise.reject(error);\n    }\n\n    return data;\n  });\n}\n","import { authHeader } from \"../_helpers\";\n\nexport const dataService = {\n  getDatasets,\n  saveDocument,\n  loadDocument,\n  getDocuments,\n};\n\nfunction getDatasets() {\n  const requestOptions = {\n    method: \"GET\",\n    headers: authHeader(),\n  };\n\n  return fetch(`http://localhost:5000/datasetlist`, requestOptions)\n    .then(handleResponse)\n    .then((data) => {\n      return data;\n    });\n}\n\nfunction getDocuments(dataset) {\n  const requestOptions = {\n    method: \"GET\",\n    headers: authHeader(),\n  };\n\n  return fetch(\n    `http://localhost:5000/loaddataset?dataset=${dataset}`,\n    requestOptions\n  )\n    .then(handleResponse)\n    .then((data) => {\n      return data;\n    });\n}\n\nfunction saveDocument(data) {\n  console.log(\"in service\");\n  console.log(data);\n  const requestOptions = {\n    headers: { ...authHeader(), \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(data),\n    method: \"POST\",\n  };\n\n  return fetch(`http://localhost:5000/savedoc`, requestOptions)\n    .then(handleResponse)\n    .then((data) => {\n      return data;\n    });\n}\n\nfunction loadDocument(dataset, docid) {\n  const requestOptions = {\n    headers: authHeader(),\n    method: \"GET\",\n  };\n\n  return fetch(\n    `http://localhost:5000/loaddoc?docid=${docid}&dataset=${dataset}`,\n    requestOptions\n  )\n    .then(handleResponse)\n    .then((data) => {\n      return data;\n    });\n}\n\nfunction handleResponse(response) {\n  return response.text().then((text) => {\n    const data = text && JSON.parse(text);\n    if (!response.ok) {\n      console.log(\"there is error!\");\n      const error = (data && data.message) || response.statusText;\n      return Promise.reject(error);\n    }\n\n    return data;\n  });\n}\n","import { userService } from \"../_services\";\nimport { alertActions } from \".\";\nimport { history } from \"../_helpers\";\nimport {\n  LOGIN_FAILURE,\n  LOGIN_REQUEST,\n  LOGIN_SUCCESS,\n  LOGOUT,\n  REGISTER_FAILURE,\n  REGISTER_SUCCESS,\n  REGISTER_REQUEST,\n  User,\n  // GETALL_FAILURE,\n  // GETALL_REQUEST,\n  // GETALL_SUCCESS,\n  // DELETE_FAILURE,\n  // DELETE_REQUEST,\n  // DELETE_SUCCESS,\n} from \"../_utils/types\";\n\nexport const userActions = {\n  login,\n  logout,\n  register,\n  // getAll,\n  // delete: _delete,\n};\n\nfunction login(username: string, password: string) {\n  return (dispatch: any) => {\n    dispatch(request({ username: username, access_token: \"?\" }));\n\n    userService.login(username, password).then(\n      (user) => {\n        dispatch(success(user));\n        console.log(process.env.PUBLIC_URL + \"/\");\n        history.push(process.env.PUBLIC_URL + \"/\");\n      },\n      (error) => {\n        dispatch(failure(error.toString()));\n        dispatch(alertActions.error(error.toString()));\n      }\n    );\n  };\n\n  function request(user: User) {\n    return { type: LOGIN_REQUEST, user };\n  }\n  function success(user: User) {\n    return { type: LOGIN_SUCCESS, user };\n  }\n  function failure(error: string) {\n    return { type: LOGIN_FAILURE, error };\n  }\n}\n\nfunction logout() {\n  return (dispatch: any) => {\n    userService.logout();\n    dispatch({ type: LOGOUT });\n  };\n}\n\nfunction register(user: User) {\n  return (dispatch: any) => {\n    dispatch(request(user));\n\n    userService.register(user).then(\n      (user) => {\n        dispatch(success(user));\n        history.push(process.env.PUBLIC_URL + \"/login\");\n        dispatch(alertActions.success(\"Registration successful\"));\n      },\n      (error) => {\n        dispatch(failure(error.toString()));\n        dispatch(alertActions.error(error.toString()));\n      }\n    );\n  };\n\n  function request(user: User) {\n    return { type: REGISTER_REQUEST, user };\n  }\n  function success(user: User) {\n    return { type: REGISTER_SUCCESS, user };\n  }\n  function failure(error: User) {\n    return { type: REGISTER_FAILURE, error };\n  }\n}\n\n// function getAll() {\n//   return (dispatch) => {\n//     dispatch(request());\n\n//     userService.getAll().then(\n//       (users) => dispatch(success(users)),\n//       (error) => dispatch(failure(error.toString()))\n//     );\n//   };\n\n//   function request() {\n//     return { type: GETALL_REQUEST };\n//   }\n//   function success(users) {\n//     return { type: GETALL_SUCCESS, users };\n//   }\n//   function failure(error) {\n//     return { type: GETALL_FAILURE, error };\n//   }\n// }\n\n// // prefixed function name with underscore because delete is a reserved word in javascript\n// function _delete(id) {\n//   return (dispatch) => {\n//     dispatch(request(id));\n\n//     userService.delete(id).then(\n//       (user) => dispatch(success(id)),\n//       (error) => dispatch(failure(id, error.toString()))\n//     );\n//   };\n\n//   function request(id) {\n//     return { type: DELETE_REQUEST, id };\n//   }\n//   function success(id) {\n//     return { type: DELETE_SUCCESS, id };\n//   }\n//   function failure(id, error) {\n//     return { type: DELETE_FAILURE, id, error };\n//   }\n// }\n","import {\n  GETDATASETS_SUCCESS,\n  GETDOCS_SUCCESS,\n  LOADSTATUS,\n  LOADDOC_SUCCESS,\n  SETLABELS,\n  SAVEDOC_SUCCESS,\n  MessageTypes,\n  CLEARDOC,\n} from \"../_utils/types\";\n\nimport { dataService } from \"../_services\";\nimport { alertActions } from \".\";\nimport { history } from \"../_helpers\";\nimport { Dispatch } from \"react\";\n\nexport const dataActions = {\n  getDatasets,\n  saveDocument,\n  loadDocument,\n  getDocuments,\n  loadStatus,\n  setLabels,\n  clearDocument,\n};\n\nfunction redirectToLogin(dispatch: Dispatch<MessageTypes>, error_text: string) {\n  // Who decides on this text? Wouldn't it be better if we used an authorization code? 401\n  if (error_text === \"UNAUTHORIZED\") {\n    dispatch(alertActions.error(\"Logged out! Redirecting to login page...\"));\n    setTimeout(() => {\n      history.push(process.env.PUBLIC_URL + \"/login\");\n    }, 500);\n  } else {\n    dispatch(alertActions.error(error_text.toString()));\n  }\n}\n\nfunction getDatasets() {\n  return (dispatch: Dispatch<any>) => {\n    dataService.getDatasets().then(\n      (data: any[]) => {\n        dispatch(success(data));\n      },\n      (error: any) => {\n        redirectToLogin(dispatch, error);\n      }\n    );\n  };\n\n  function success(data: any[]) {\n    return { type: GETDATASETS_SUCCESS, data };\n  }\n}\n\n// this is super weird right? why load documents just to get a status...\nfunction loadStatus(dataset: string, docId: string) {\n  return (dispatch: Dispatch<any>) => {\n    dataService.getDocuments(dataset).then(\n      (data: any) => {\n        dispatch(success(data));\n      },\n      (error: any) => {\n        redirectToLogin(dispatch, error);\n      }\n    );\n  };\n\n  function success(data: any) {\n    return { type: LOADSTATUS, data, docId };\n  }\n}\n\nfunction getDocuments(dataset: string) {\n  return (dispatch: Dispatch<any>) => {\n    dataService.getDocuments(dataset).then(\n      (data: any) => {\n        dispatch(success(data));\n      },\n      (error: any) => {\n        redirectToLogin(dispatch, error);\n      }\n    );\n  };\n\n  function success(data: any[]) {\n    return { type: GETDOCS_SUCCESS, data };\n  }\n}\n\nfunction setLabels(newLabels: any[]) {\n  return {\n    type: SETLABELS,\n    newLabels,\n  };\n}\n\nfunction clearDocument() {\n  return {\n    type: CLEARDOC,\n  };\n}\n\nfunction loadDocument(dataset: string, docid: string) {\n  return (dispatch: Dispatch<any>) => {\n    dataService.loadDocument(dataset, docid).then(\n      (data: any) => {\n        console.log(data);\n        dispatch(success(data));\n      },\n      (error: any) => {\n        redirectToLogin(dispatch, error);\n      }\n    );\n  };\n\n  function success(data: any) {\n    return { type: LOADDOC_SUCCESS, data };\n  }\n}\n\nfunction saveDocument(data: any) {\n  return (dispatch: Dispatch<any>) => {\n    dataService.saveDocument(data).then(\n      (data: any) => {\n        dispatch(success(data));\n      },\n      (error: any) => {\n        redirectToLogin(dispatch, error);\n      }\n    );\n  };\n\n  function success(data: any) {\n    return { type: SAVEDOC_SUCCESS, data };\n  }\n}\n","import { CHANGE_FORM } from \"../_utils/types\";\n\nexport const changeForm = (newState: string) => {\n  console.log(\"inside login/changeForm\");\n  return { type: CHANGE_FORM, newState };\n};\n\nexport const utilActions = {\n  changeForm,\n};\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nexport const PrivateRoute = ({ component: Component, ...rest }) => (\n  <Route\n    {...rest}\n    render={(props) =>\n      localStorage.getItem(\"user\") ? (\n        <Component {...props} />\n      ) : (\n        <Redirect\n          to={{ pathname: \"/login\", state: { from: props.location } }}\n        />\n      )\n    }\n  />\n);\n","import React from \"react\";\nimport { Container, Navbar } from \"react-bootstrap\";\nimport { State } from \"../_utils/types\";\nimport { connect } from \"react-redux\";\nimport { withRouter, Link, RouteComponentProps } from \"react-router-dom\";\n\nclass MainPanel extends React.Component<MatchProps> {\n  render() {\n    const docid = this.props.match.params.docid;\n    const datasetid = this.props.match.params.id;\n\n    return (\n      <div>\n        <Navbar bg=\"light\" expand=\"lg\" fixed=\"top\">\n          <Container>\n            <Navbar.Brand href={process.env.PUBLIC_URL}>\n              <img\n                alt=\"\"\n                src={`${process.env.PUBLIC_URL}/logo-black-trans.png`}\n                //width=\"30\"\n                height=\"30\"\n                className=\"d-inline-block align-top\"\n              />\n            </Navbar.Brand>\n            <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n            <Navbar.Collapse id=\"basic-navbar-nav\">\n              <Navbar.Collapse className=\"mr-auto\">\n                <Navbar.Text className=\"px-2\">\n                  <Link to=\"/\">Home</Link>\n                </Navbar.Text>\n                {datasetid && <Navbar.Text className=\"px-1\">{\">\"}</Navbar.Text>}\n                <Navbar.Text className=\"px-2\">\n                  <Link to={`/dataset/${datasetid}`}>{datasetid}</Link>\n                </Navbar.Text>\n                {docid && <Navbar.Text className=\"px-1\">{\">\"}</Navbar.Text>}\n                <Navbar.Text className=\"px-2\">{docid}</Navbar.Text>\n              </Navbar.Collapse>\n\n              {this.props.hideLoginButton ? null : (\n                <>\n                  <Navbar.Collapse className=\"justify-content-end\">\n                    {this.props.userName ? (\n                      <>\n                        <Navbar.Text className=\"px-3\">{`Signed in as: ${this.props.userName}`}</Navbar.Text>\n                        <Link to=\"/login\">Logout</Link>\n                      </>\n                    ) : (\n                      <Navbar.Text>\n                        <Link to=\"/login\">Login</Link>\n                      </Navbar.Text>\n                    )}\n                  </Navbar.Collapse>\n                </>\n              )}\n            </Navbar.Collapse>\n          </Container>\n        </Navbar>\n        <Container>{this.props.children}</Container>\n      </div>\n    );\n  }\n}\n\ninterface MatchProps extends RouteComponentProps<MatchParams> {\n  userName: string;\n  hideLoginButton?: boolean;\n}\n\ninterface MatchParams {\n  id: string;\n  docid: string;\n}\n\nconst mapStateToProps = (state: State) => ({\n  // TODO: this is not working!\n  // loggedIn: state.authentication.loggedIn,\n  userName: state.authentication.user.username,\n});\n\nconst mapDispatchToProps = (dispatch: Function) => ({});\n\nconst connectedMainPanel = withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(MainPanel)\n);\nexport { connectedMainPanel as MainPanel };\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { changeForm } from \"../_actions\";\nimport { State } from \"../_utils/types\";\nimport { Form } from \"react-bootstrap\";\n\n// TODO: who wrote this code? Where did I get it from?????\n\nclass Input extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n    this.changeInput = this.changeInput.bind(this);\n  }\n\n  changeInput(event: any) {\n    const value = event.target.value;\n    const name = event.target.name;\n    this.props.handleChange({ [name]: value });\n  }\n\n  render() {\n    const { label, type, name, model, formState } = this.props;\n\n    const fsv = formState[model];\n\n    return (\n      <Form.Group>\n        <Form.Label>{label}</Form.Label>\n        <Form.Control\n          type={type}\n          name={name}\n          defaultValue={fsv}\n          onChange={this.changeInput}\n        />\n      </Form.Group>\n    );\n  }\n}\n\ntype Props = {\n  label: string;\n  type: string;\n  name: string;\n  model: string;\n  formState: {\n    [key: string]: number | string;\n  };\n  handleChange: Function;\n};\n\nconst mapStateToProps = (state: State) => ({\n  formState: state.util.formState,\n});\n\nconst mapDispatchToProps = (dispatch: Function) => ({\n  handleChange: (values: any) => dispatch(changeForm(values)),\n});\n\nconst connectedInput = connect(mapStateToProps, mapDispatchToProps)(Input);\n\nexport { connectedInput as Input };\n","import React from \"react\";\nimport { Link, RouteComponentProps } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { ListGroup } from \"react-bootstrap\";\nimport { MainPanel } from \"../_components\";\nimport { dataActions } from \"../_actions\";\nimport { Badge } from \"react-bootstrap\";\n\n// This shows you all the documents in a given dataset.\nclass DatasetPage extends React.Component<MatchProps> {\n  componentDidMount() {\n    const { data, match } = this.props;\n    if (data.documentList.length === 0) {\n      this.props.getDocuments(match.params.id);\n    }\n\n    if (data.words.length > 0) {\n      this.props.clearDocument();\n    }\n  }\n\n  render() {\n    const { match, data } = this.props;\n    console.log(match.params.id);\n\n    console.log(data);\n\n    return (\n      <MainPanel>\n        <div className=\"col-md-12\">\n          {/* <h1>{match.params.id}</h1> */}\n\n          {data && data.documentList && data.annotatedDocumentSet && (\n            <p>\n              There are {data.documentList.length} documents. Of these,{\" \"}\n              {data.annotatedDocumentSet.length} have been annotated (marked in\n              green).\n            </p>\n          )}\n          <ListGroup>\n            {data &&\n              data.documentList &&\n              data.documentList.map((id: string, index: number) => (\n                <ListGroup.Item\n                  key={index}\n                  variant={\n                    data.annotatedDocumentSet.indexOf(id) > -1\n                      ? \"success\"\n                      : undefined\n                  }\n                >\n                  <Badge\n                    className=\"sentence-badge\"\n                    key={\"badge-\" + index}\n                    variant={\n                      data.annotatedDocumentSet.indexOf(id) > -1\n                        ? \"success\"\n                        : \"light\"\n                    }\n                  >\n                    {index + 1}\n                  </Badge>\n                  {/* possible to pass arguments here: https://ui.dev/react-router-v4-pass-props-to-link/ */}\n                  <Link to={{ pathname: `/dataset/${match.params.id}/${id}` }}>\n                    {id}\n                  </Link>\n                </ListGroup.Item>\n              ))}\n          </ListGroup>\n        </div>\n      </MainPanel>\n    );\n  }\n}\n\n// TODO: fix the any!!\ninterface MatchProps extends RouteComponentProps<MatchParams> {\n  getDocuments: any;\n  clearDocument: any;\n  data: any;\n}\n\ninterface MatchParams {\n  id: string;\n  docid: string;\n}\n\n// TODO: make this STATE\nfunction mapState(state: any) {\n  const { authentication, data } = state;\n  const { user } = authentication;\n  return { user, data };\n}\n\nconst actionCreators = {\n  getDocuments: dataActions.getDocuments,\n  clearDocument: dataActions.clearDocument,\n};\n\nconst connectedDocumentPage = connect(mapState, actionCreators)(DatasetPage);\nexport { connectedDocumentPage as DatasetPage };\n","import React from \"react\";\nimport { Button } from \"react-bootstrap\";\n\nclass LabelButton extends React.Component<Props> {\n  render() {\n    return (\n      <Button\n        onClick={() => this.props.onClick()}\n        bsPrefix=\"custom-btn\"\n        className={[\"label-button\", this.props.label].join(\" \")}\n        style={{ background: this.props.color }}\n      >\n        {this.props.label}\n      </Button>\n    );\n  }\n}\n\nexport default LabelButton;\n\ntype Props = {\n  label: string;\n  onClick: Function;\n  color: string;\n};\n","import React from \"react\";\nimport { Popover, Overlay } from \"react-bootstrap\";\nimport LabelButton from \"./LabelButton\";\nimport { connect } from \"react-redux\";\n\nclass Token extends React.Component<TokProps> {\n  private myRef = React.createRef<any>();\n\n  handleOver(evt: any) {\n    // if the left button is pressed\n    if (evt.buttons === 1) {\n      this.props.mouseup();\n    }\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"contextmenu\", this._handleContextMenu);\n  }\n\n  _handleContextMenu(event: any) {\n    event.preventDefault();\n  }\n\n  handleDown(evt: any) {\n    // console.log(evt.target.type) -> this will give type button\n\n    if (evt.button === 2) {\n      // don't allow right click to open a menu\n      console.log(\"right click down\");\n      //return\n    }\n\n    // only fire if you click on a token.\n    if (evt.target.classList.contains(\"token\")) {\n      this.props.mousedown();\n    }\n  }\n\n  handleUp(evt: any) {\n    if (evt.button === 2) {\n      // don't allow right click to open a menu\n      console.log(\"right click up\");\n      this.props.set_label(\"O\");\n      return;\n    }\n\n    // only fire if you click on a token.\n    //if(evt.target.classList.contains(\"token\")){\n    this.props.mouseup();\n    //}\n  }\n\n  render() {\n    const tag = this.props.label.split(\"-\").pop() || \"O\";\n    let labellist = Object.keys(this.props.labelset).sort();\n    const oindex = labellist.indexOf(\"O\");\n    labellist.splice(oindex, 1);\n    labellist.push(\"O\");\n\n    const label_button_list = labellist.map((label) => (\n      <LabelButton\n        key={label}\n        label={label}\n        color={this.props.labelset[label]}\n        onClick={() => this.props.set_label(label)}\n      />\n    ));\n\n    var spacer_list = [\"spacer\", \"nocopy\"];\n    var spacer_style = { background: \"transparent\" };\n    if (this.props.label !== \"O\" && this.props.next_token_is_entity) {\n      //spacer_list.push(tag || \"\");\n      spacer_style.background = this.props.labelset[tag];\n      spacer_list.push(\"label\");\n    }\n\n    if (\n      this.props.selected === \"highlightstart\" ||\n      this.props.selected === \"highlighted\"\n    ) {\n      spacer_list.push(\"highlighted\");\n    }\n    const class_list = [\n      \"token\",\n      \"nocopy\",\n      this.props.selected,\n      tag,\n      this.props.label === \"O\" ? null : \"label\",\n    ];\n\n    if (!this.props.next_token_is_entity && this.props.label[0] === \"B\") {\n      class_list.push(\"labelsingle\");\n    } else if (this.props.label[0] === \"B\") {\n      class_list.push(\"labelstart\");\n    } else if (this.props.label !== \"O\" && !this.props.next_token_is_entity) {\n      class_list.push(\"labelend\");\n    }\n\n    return (\n      <>\n        <span\n          className={class_list.join(\" \")}\n          onMouseDown={(evt) => this.handleDown(evt)}\n          onMouseUp={(evt) => this.handleUp(evt)}\n          onMouseOver={(evt) => this.handleOver(evt)}\n          style={{\n            background: this.props.labelset[tag],\n            color: this.props.wordsColor,\n          }}\n          ref={this.myRef}\n        >\n          {this.props.form}\n        </span>\n        {/*  this whitespace is needed to get correct line breaks! */}\n        <span className={spacer_list.join(\" \")} style={spacer_style}>\n          {\" \"}\n        </span>\n        <Overlay\n          show={this.props.show_popover}\n          target={this.myRef.current}\n          placement={\"bottom\"}\n          transition={false}\n        >\n          <Popover id=\"popover-container\">\n            <Popover.Title>\n              {this.props.display_phrase}{\" \"}\n              <a\n                href={`https://www.google.com/search?q=${this.props.display_phrase}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                (Google)\n              </a>\n            </Popover.Title>\n            <Popover.Content>\n              <div className=\"label-box\">{label_button_list}</div>\n            </Popover.Content>\n          </Popover>\n        </Overlay>\n      </>\n    );\n  }\n}\n\n// TODO: make this STATE\nfunction mapState(state: any) {\n  const { data } = state;\n  const { wordsColor } = data;\n  return { wordsColor };\n}\n\ntype TokProps = {\n  wordsColor: string;\n  form: string;\n  label: string;\n  labelset: { [key: string]: string };\n  selected: string;\n  mousedown: any;\n  mouseup: any;\n  show_popover: boolean;\n  set_label: any;\n  next_token_is_entity: boolean;\n  display_phrase: string;\n};\n\nconst actionCreators = {\n  //getDocuments: dataActions.getDocuments,\n};\n\nconst connectedToken = connect(mapState, actionCreators)(Token);\nexport { connectedToken as Token };\n","import React from \"react\";\nimport { Token } from \"./Token\";\nimport { Badge } from \"react-bootstrap\";\n\nclass Sentence extends React.Component<SentProps, State> {\n  constructor(props: any) {\n    super(props);\n\n    this.state = {\n      color: \"white\",\n      words: [[]],\n      labels: [[]],\n      path: \"\",\n      mouseIsDown: false,\n      selected_range: [-1, -1],\n      popover_index: -1,\n      prevDoc: \"\",\n      nextDoc: \"\",\n      status: \"\",\n    };\n\n    this.rowMouseDown = this.rowMouseDown.bind(this);\n    this.rowMouseUp = this.rowMouseUp.bind(this);\n  }\n\n  showPopoverFunc(index: number) {\n    return (\n      this.props.isActive &&\n      !this.state.mouseIsDown &&\n      index === this.state.selected_range[1]\n    );\n  }\n\n  updateRange(start: number, end: number) {\n    this.setState({ selected_range: [start, end] });\n  }\n\n  tokenUp(index: number) {\n    this.updateRange(this.state.selected_range[0], index);\n  }\n\n  tokenDown(index: number) {\n    this.updateRange(index, index);\n  }\n\n  rowMouseDown(evt: any) {\n    this.props.setFocus(this.props.index);\n  }\n\n  rowMouseUp(evt: any) {\n    if (evt.target.tagName !== \"A\") {\n      this.checkClearRange(evt);\n    }\n  }\n\n  checkClearRange(evt: any) {\n    const tgt = evt.target;\n    if (\n      tgt.classList.contains(\"token\") ||\n      tgt.classList.contains(\"label-button\")\n    ) {\n      // do nothing?\n    } else {\n      this.updateRange(-1, -1);\n    }\n  }\n\n  selected_keyword(i: number) {\n    var first = this.state.selected_range[0];\n    var last = this.state.selected_range[this.state.selected_range.length - 1];\n\n    if (!this.props.isActive) {\n      return \"\";\n    }\n\n    // this could happen if you are dragging backwards.\n    // then we switch them!\n    if (first > last) {\n      const tmp = last;\n      last = first;\n      first = tmp;\n    }\n\n    if (first === last && first === i) {\n      return \"highlightsingle\";\n    }\n    if (i === first) {\n      return \"highlightstart\";\n    } else if (i === last) {\n      return \"highlightend\";\n    } else if (i > first && i < last) {\n      return \"highlighted\";\n    }\n\n    return \"\";\n  }\n\n  render() {\n    const highlighted_phrase = this.props.sent\n      .slice(this.state.selected_range[0], this.state.selected_range[1] + 1)\n      .join(\" \");\n\n    return (\n      <div\n        className=\"sentence\"\n        onMouseDown={this.rowMouseDown}\n        onMouseUp={this.rowMouseUp}\n      >\n        <Badge\n          className=\"sentence-badge\"\n          key={\"badge-\" + this.props.index}\n          variant=\"light\"\n        >\n          {this.props.index}\n        </Badge>\n        {this.props.sent.map((tok, index) => (\n          <Token\n            key={index}\n            form={tok}\n            label={this.props.labels[index]}\n            labelset={this.props.labelset}\n            next_token_is_entity={\n              index === this.props.sent.length - 1\n                ? false\n                : this.props.labels[index + 1][0] === \"I\"\n            }\n            selected={this.selected_keyword(index)}\n            mousedown={() => this.tokenDown(index)}\n            mouseup={() => this.tokenUp(index)}\n            show_popover={this.showPopoverFunc(index)}\n            display_phrase={highlighted_phrase}\n            set_label={(label: string) =>\n              this.props.set_label(\n                label,\n                this.state.selected_range[0],\n                this.state.selected_range[1]\n              )\n            }\n          />\n        ))}\n      </div>\n    );\n  }\n}\n\ntype State = {\n  color: string;\n  words: Array<Array<string>>;\n  labels: Array<Array<string>>;\n  path: string;\n  selected_range: Array<number>;\n  mouseIsDown: boolean;\n  popover_index: number;\n  prevDoc: string;\n  nextDoc: string;\n  status: string;\n};\n\ntype SentProps = {\n  index: number;\n  sent: string[];\n  labels: string[];\n  labelset: { [key: string]: string };\n  setFocus: any;\n  isActive: boolean;\n  set_label: any;\n};\n\nexport default Sentence;\n","import React, { ChangeEvent } from \"react\";\nimport { cloneDeep } from \"lodash\";\nimport {\n  Button,\n  ButtonGroup,\n  Row,\n  Col,\n  Card,\n  Form,\n  Table,\n} from \"react-bootstrap\";\nimport Sentence from \"./Sentence\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { history } from \"../_helpers\";\nimport {\n  IoIosSave,\n  IoMdCheckmarkCircleOutline,\n  IoIosArrowForward,\n  IoIosArrowBack,\n} from \"react-icons/io\";\nimport { connect } from \"react-redux\";\nimport { RouteComponentProps } from \"react-router-dom\";\nimport { dataActions } from \"../_actions\";\n\nclass Annotate extends React.Component<MatchProps, State> {\n  constructor(props: MatchProps) {\n    super(props);\n    this.state = {\n      activeSent: -1,\n      isSaved: true,\n      propagate: true,\n    };\n  }\n\n  componentDidMount() {\n    this.loadAll(this.props.dataset, this.props.docid);\n  }\n\n  // this came from: https://stackoverflow.com/questions/29425820/elegant-way-to-find-contiguous-subarray-within-an-array-in-javascript\n  // CSA is continuous sub array\n  find_csa(arr: string[], subarr: string[], from_index: number) {\n    let i = from_index >>> 0,\n      sl = subarr.length,\n      l = arr.length + 1 - sl;\n\n    let inds = [];\n\n    loop: for (; i < l; i++) {\n      // TODO: consider adding another option to control whether it should propagate on lower case.\n      for (let j = 0; j < sl; j++)\n        if (arr[i + j].toLowerCase() !== subarr[j].toLowerCase()) continue loop;\n      inds.push(i);\n    }\n    return inds;\n  }\n\n  setLabel(label: string, first: number, last: number, sent_index: number) {\n    this.setState({ isSaved: false });\n\n    // then we switch them!\n    if (first > last) {\n      const tmp = last;\n      last = first;\n      first = tmp;\n    }\n\n    // get the string associated with this range\n    var word_slice = this.props.data.words[sent_index].slice(first, last + 1);\n\n    var phrase_locations: number[][] = [];\n    if (this.state.propagate) {\n      for (let j = 0; j < this.props.data.words.length; j++) {\n        var inds = this.find_csa(this.props.data.words[j], word_slice, 0);\n        inds.forEach((ind) =>\n          phrase_locations.push([j, ind, ind + word_slice.length - 1])\n        );\n      }\n    } else {\n      // only put the target phrase location\n      phrase_locations.push([sent_index, first, last]);\n    }\n\n    // I don't want to modify the state variable!\n    var newLabels = cloneDeep(this.props.data.labels);\n\n    phrase_locations.forEach((tuple) => {\n      //console.log(tuple);\n      var phrase_sent = tuple[0];\n      var phrase_start = tuple[1];\n      var phrase_end = tuple[2];\n\n      // don't update something in the middle of an annotated entity\n      if (\n        this.props.data.labels[phrase_sent][phrase_start][0] === \"I\" &&\n        label !== \"O\"\n      ) {\n        return;\n      }\n\n      for (var i = phrase_start; i <= phrase_end; i++) {\n        var pref = \"\";\n        if (label !== \"O\") {\n          if (i === phrase_start) {\n            pref = \"B-\";\n          } else {\n            pref = \"I-\";\n          }\n        } else {\n          // assumes that all spans start with B-\n          // if i+1 is I-, then set i+1 to B-\n          var next = newLabels[phrase_sent][i + 1];\n          if (next && next.startsWith(\"I-\")) {\n            // change the I- to a B-\n            newLabels[phrase_sent][i + 1] = \"B-\" + next.split(\"-\").pop();\n          }\n        }\n        newLabels[phrase_sent][i] = pref + label;\n      }\n    });\n\n    this.props.setLabels(newLabels);\n    // TODO: update labels here!\n    this.setState({ activeSent: -1 });\n  }\n\n  sendLabels() {\n    this.setState({ isSaved: true });\n    var data = {\n      docid: this.props.docid,\n      dataset: this.props.dataset,\n      sentences: this.props.data.words,\n      labels: this.props.data.labels,\n      path: this.props.data.path,\n    };\n    this.props.saveDocument(data);\n    this.props.data.isAnnotated = true;\n  }\n\n  setFocus(sent_index: number) {\n    console.log(`sentence ${sent_index} wants focus now!`);\n    this.setState({ activeSent: sent_index });\n  }\n\n  loadAll(dataset: string, docId: string) {\n    this.props.loadDocument(dataset, docId);\n    // this.props.loadStatus(dataset, docId);\n  }\n\n  buttonPush(dataset: string, newDoc: string) {\n    // this is a very important line\n    // don't save docs that have not been touched!\n    // if (!this.state.isSaved) {\n    //   this.sendLabels();\n    // }\n\n    const labels = this.props.data.labels;\n    let hasLabel = false;\n    for (let i = 0; i < labels.length; i++) {\n      const sent = labels[i];\n      for (let j = 0; j < sent.length; j++) {\n        const label = sent[j];\n        if (label !== \"O\") {\n          hasLabel = true;\n          break;\n        }\n      }\n    }\n\n    let confirmed = true;\n    if (hasLabel && !this.state.isSaved) {\n      confirmed = window.confirm(\n        \"There are unsaved labels! Press OK to discard labels, and cancel to stay on this page.\"\n      );\n    }\n\n    if (confirmed) {\n      this.props.clearDocument();\n      var url = `/dataset/${dataset}/${newDoc}`;\n      this.loadAll(dataset, newDoc);\n      history.push(process.env.PUBLIC_URL + url);\n    }\n  }\n\n  render() {\n    const { data, docid } = this.props;\n\n    const doc_index = data.documentList.indexOf(docid);\n    const nextDoc = data.documentList[doc_index + 1];\n    const prevDoc = data.documentList[doc_index - 1];\n\n    // logic for updating the range.\n    // if mousedown on a token, that becomes start of the range.\n    // if mouse enters a token AND mouse down AND range is consecutive: add to range\n    // if mousedown OUTSIDE a token, then clear the range.\n    // if mouseup on a token, that becomes end of the range.\n    return (\n      <Row className=\"document\">\n        <Col md={9}>\n          <Card>\n            <Card.Body>\n              {data.words &&\n                data.labelset &&\n                data.words.map((sent: string[], sent_index: number) => (\n                  <Sentence\n                    key={sent_index}\n                    index={sent_index}\n                    sent={sent}\n                    labels={data.labels[sent_index]}\n                    labelset={data.labelset}\n                    setFocus={(ind: number) => this.setFocus(ind)}\n                    isActive={sent_index === this.state.activeSent}\n                    set_label={(lab: string, first: number, last: number) =>\n                      this.setLabel(lab, first, last, sent_index)\n                    }\n                  />\n                ))}\n            </Card.Body>\n          </Card>\n        </Col>\n        <Col md={3}>\n          {this.state.isSaved && data.isAnnotated && (\n            <Button variant=\"outline-success\">\n              <>\n                <IoMdCheckmarkCircleOutline /> Saved\n              </>\n            </Button>\n          )}\n          {(!this.state.isSaved || !data.isAnnotated) && (\n            <Button variant=\"outline-danger\" onClick={() => this.sendLabels()}>\n              <>\n                <IoIosSave /> Save\n              </>\n            </Button>\n          )}\n          <p></p>\n          <p>{`On document ${doc_index + 1} out of ${\n            data.documentList.length\n          }`}</p>\n          <p></p>\n          <Form>\n            <div className=\"mb-3\">\n              <Form.Check\n                onChange={(evt: ChangeEvent<HTMLInputElement>) =>\n                  this.setState({ propagate: evt.target.checked })\n                }\n                defaultChecked={this.state.propagate}\n                id=\"propagation-checkbox\"\n                type=\"checkbox\"\n                label=\"Propagate annotations?\"\n              />\n            </div>\n          </Form>\n          <p></p>\n          <ButtonGroup>\n            {prevDoc && (\n              <Button\n                variant=\"outline-primary\"\n                onClick={() => this.buttonPush(this.props.dataset, prevDoc)}\n              >\n                <IoIosArrowBack /> Previous\n              </Button>\n            )}\n            {nextDoc && (\n              <Button\n                variant=\"outline-primary\"\n                onClick={() => this.buttonPush(this.props.dataset, nextDoc)}\n              >\n                Next <IoIosArrowForward />\n              </Button>\n            )}\n          </ButtonGroup>\n          <p></p>\n          <ButtonGroup>\n            <Link to={`${this.props.uplink}`}>\n              <Button variant=\"outline-secondary\">Back to all docs...</Button>\n            </Link>\n          </ButtonGroup>\n          <p></p>\n          {data.suggestions &&\n          <Table striped bordered hover size=\"sm\">\n            <thead>\n              <tr>\n                <th>Phrase</th>\n                <th>Num Occur.</th>\n              </tr>\n            </thead>\n            <tbody>\n              {Object.keys(data.suggestions).map((s: string) => (\n                <tr key={s}>\n                  <td>{s}</td>\n                  <td>{data.suggestions[s].length}</td>\n                </tr>\n              ))}\n            </tbody>\n          </Table>}\n          {/* {this.props.data.suggestions && this.props.data.suggestions.map((dd: any) => dd[\"text\"])} */}\n        </Col>\n      </Row>\n    );\n  }\n}\n\n// TODO: fix the any!!\ninterface MatchProps extends RouteComponentProps<MatchParams> {\n  data: any;\n  dataset: string;\n  docid: string;\n  uplink: string;\n  setLabels: any;\n  clearDocument: any;\n  saveDocument: any;\n  loadDocument: any;\n  loadStatus: any;\n}\n\ninterface MatchParams {}\n\n// TODO: move this state into the main state?\ntype State = {\n  isSaved: boolean;\n  activeSent: number;\n  propagate: boolean;\n};\n\n// TODO: fix this any...\nfunction mapState(state: any) {\n  const { data } = state;\n  return { data };\n}\n\nconst actionCreators = {\n  saveDocument: dataActions.saveDocument,\n  loadDocument: dataActions.loadDocument,\n  loadStatus: dataActions.loadStatus,\n  setLabels: dataActions.setLabels,\n  clearDocument: dataActions.clearDocument,\n};\n\nconst connectedAnnotate = connect(\n  mapState,\n  actionCreators\n)(withRouter(Annotate));\nexport { connectedAnnotate as Annotate };\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Annotate } from \"../_components/Annotate\";\nimport { MainPanel } from \"../_components\";\nimport { RouteComponentProps } from \"react-router-dom\";\n\nclass DocumentPage extends React.Component<MatchProps> {\n  render() {\n    const { match } = this.props;\n    return (\n      <MainPanel>\n        <div className=\"col-md-12\">\n          <Annotate\n            dataset={match.params.id}\n            docid={match.params.docid}\n            uplink={`/dataset/${match.params.id}`}\n          />\n        </div>\n        <div style={{ height: 150 }}></div>\n      </MainPanel>\n    );\n  }\n}\n\n// TODO: fix the any!!\ninterface MatchProps extends RouteComponentProps<MatchParams> {\n  data: any;\n}\n\ninterface MatchParams {\n  id: string;\n  docid: string;\n}\n\n// TODO: make this STATE\nfunction mapState(state: any) {\n  const { authentication, data } = state;\n  const { user } = authentication;\n  return { user, data };\n}\n\nconst actionCreators = {};\n\nconst connectedDocumentPage = connect(mapState, actionCreators)(DocumentPage);\nexport { connectedDocumentPage as DocumentPage };\n","import React from \"react\";\nimport { Link, RouteComponentProps } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { MainPanel } from \"../_components\";\nimport { dataActions } from \"../_actions\";\nimport { ListGroup, Jumbotron } from \"react-bootstrap\";\n\n// this page shows a list of datasets. If you click on a dataset,\n// that takes you to a DatasetPage.\nclass HomePage extends React.Component<MatchProps> {\n  componentDidMount() {\n    this.props.getDatasets();\n  }\n\n  render() {\n    const { user, data } = this.props;\n    return (\n      <MainPanel>\n        <div className=\"col-md-12\">\n          <Jumbotron>\n            <h1>Hello, {user.username}!</h1>\n            <p>\n              Welcome to TALEN. Choose a dataset below to get started\n              annotating!\n            </p>\n          </Jumbotron>\n          <h3>Dataset List:</h3>\n          <ListGroup>\n            {data &&\n              data.datasetIDs &&\n              data.datasetIDs.map((id: string, index: number) => (\n                <ListGroup.Item key={index}>\n                  <Link to={`/dataset/${id}`}>{id}</Link>\n                </ListGroup.Item>\n              ))}\n          </ListGroup>\n        </div>\n      </MainPanel>\n    );\n  }\n}\n\n// TODO: fix the any!!\ninterface MatchProps extends RouteComponentProps<MatchParams> {\n  data: any;\n  user: any;\n  getDatasets: any;\n}\n\ninterface MatchParams {\n  id: string;\n  docid: string;\n}\n\n// TODO: fix the any!\nfunction mapState(state: any) {\n  const { authentication, data } = state;\n  const { user } = authentication;\n  return { user, data };\n}\n\nconst actionCreators = {\n  getDatasets: dataActions.getDatasets,\n};\n\nconst connectedDatasetPage = connect(mapState, actionCreators)(HomePage);\nexport { connectedDatasetPage as HomePage };\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { MainPanel, Input } from \"../_components\";\nimport { userActions } from \"../_actions\";\nimport { State } from \"../_utils/types\";\n\nclass LoginPage extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    // reset login status\n    // what???\n    this.props.logout();\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(e: any) {\n    e.preventDefault();\n\n    const { formState, login } = this.props;\n    login(formState.username, formState.password);\n  }\n\n  render() {\n    let msg = null;\n    if (process.env.REACT_APP_ENV === \"demo\") {\n      msg = <p>In the demo, you can log in with anything (empty/empty).</p>;\n    }\n\n    return (\n      <MainPanel hideLoginButton={true}>\n        <div className=\"col-md-6 col-md-offset-3\">\n          <h2>Login</h2>\n\n          {msg}\n\n          <form name=\"form\" onSubmit={this.handleSubmit}>\n            <Input\n              name=\"username\"\n              label=\"Username\"\n              type=\"text\"\n              model=\"username\"\n            ></Input>\n            <Input\n              name=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              model=\"password\"\n            ></Input>\n            <div className=\"form-group\">\n              <button className=\"btn btn-primary\">Login</button>\n              {/* <Link to=\"/register\" className=\"btn btn-link\">\n                Register\n              </Link> */}\n            </div>\n          </form>\n        </div>\n      </MainPanel>\n    );\n  }\n}\n\ntype Props = {\n  logout: any;\n  login: any;\n  formState: {\n    [key: string]: number | string;\n  };\n};\n\nfunction mapState(state: State) {\n  const { loggingIn } = state.authentication;\n  const { formState } = state.util;\n  return { loggingIn, formState };\n}\n\nconst actionCreators = {\n  login: userActions.login,\n  logout: userActions.logout,\n};\n\nconst connectedLoginPage = connect(mapState, actionCreators)(LoginPage);\nexport { connectedLoginPage as LoginPage };\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\n\nimport { userActions } from \"../_actions\";\n\nclass RegisterPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      user: {\n        firstName: \"\",\n        lastName: \"\",\n        username: \"\",\n        password: \"\",\n      },\n      submitted: false,\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    const { name, value } = event.target;\n    const { user } = this.state;\n    this.setState({\n      user: {\n        ...user,\n        [name]: value,\n      },\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n\n    this.setState({ submitted: true });\n    const { user } = this.state;\n    if (user.firstName && user.lastName && user.username && user.password) {\n      this.props.register(user);\n    }\n  }\n\n  render() {\n    const { user, submitted } = this.state;\n    return (\n      <div className=\"col-md-6 col-md-offset-3\">\n        <h2>Register</h2>\n        <form name=\"form\" onSubmit={this.handleSubmit}>\n          <div\n            className={\n              \"form-group\" + (submitted && !user.firstName ? \" has-error\" : \"\")\n            }\n          >\n            <label htmlFor=\"firstName\">First Name</label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              name=\"firstName\"\n              value={user.firstName}\n              onChange={this.handleChange}\n            />\n            {submitted && !user.firstName && (\n              <div className=\"help-block\">First Name is required</div>\n            )}\n          </div>\n          <div\n            className={\n              \"form-group\" + (submitted && !user.lastName ? \" has-error\" : \"\")\n            }\n          >\n            <label htmlFor=\"lastName\">Last Name</label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              name=\"lastName\"\n              value={user.lastName}\n              onChange={this.handleChange}\n            />\n            {submitted && !user.lastName && (\n              <div className=\"help-block\">Last Name is required</div>\n            )}\n          </div>\n          <div\n            className={\n              \"form-group\" + (submitted && !user.username ? \" has-error\" : \"\")\n            }\n          >\n            <label htmlFor=\"username\">Username</label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              name=\"username\"\n              value={user.username}\n              onChange={this.handleChange}\n            />\n            {submitted && !user.username && (\n              <div className=\"help-block\">Username is required</div>\n            )}\n          </div>\n          <div\n            className={\n              \"form-group\" + (submitted && !user.password ? \" has-error\" : \"\")\n            }\n          >\n            <label htmlFor=\"password\">Password</label>\n            <input\n              type=\"password\"\n              className=\"form-control\"\n              name=\"password\"\n              value={user.password}\n              onChange={this.handleChange}\n            />\n            {submitted && !user.password && (\n              <div className=\"help-block\">Password is required</div>\n            )}\n          </div>\n          <div className=\"form-group\">\n            <button className=\"btn btn-primary\">Register</button>\n            <Link to=\"/login\" className=\"btn btn-link\">\n              Cancel\n            </Link>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nfunction mapState(state) {\n  const { registering } = state.registration;\n  return { registering };\n}\n\nconst actionCreators = {\n  register: userActions.register,\n};\n\nconst connectedRegisterPage = connect(mapState, actionCreators)(RegisterPage);\nexport { connectedRegisterPage as RegisterPage };\n","import React from \"react\";\nimport { Router, Route, Switch, Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\n\nimport { history } from \"../_helpers\";\nimport { alertActions } from \"../_actions\";\nimport { PrivateRoute } from \"../_components\";\nimport {\n  LoginPage,\n  HomePage,\n  DatasetPage,\n  DocumentPage,\n  RegisterPage,\n} from \"../_pages\";\nimport \"./App.css\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    history.listen((location, action) => {\n      // clear alert on location change\n      this.props.clearAlerts();\n    });\n  }\n\n  render() {\n    const { alert } = this.props;\n    return (\n      <Router history={history}>\n        {alert.message && (\n          <div className={`alert ${alert.type}`}>{alert.message}</div>\n        )}\n\n        <Switch>\n          <PrivateRoute exact path=\"/\" component={HomePage} />\n          <PrivateRoute exact path=\"/dataset/:id\" component={DatasetPage} />\n          <PrivateRoute\n            exact\n            path=\"/dataset/:id/:docid\"\n            component={DocumentPage}\n          />\n          <Route path=\"/login\" component={LoginPage} />\n          {/* <Route path=\"/register\" component={RegisterPage} /> */}\n          <Redirect from=\"*\" to=\"/\" />\n        </Switch>\n      </Router>\n    );\n  }\n}\n\nfunction mapState(state) {\n  const { alert } = state;\n  return { alert };\n}\n\nconst actionCreators = {\n  clearAlerts: alertActions.clear,\n};\n\nconst connectedApp = connect(mapState, actionCreators)(App);\nexport { connectedApp as App };\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport \"./index.css\";\nimport { store } from \"./_helpers\";\nimport { App } from \"./App\";\nimport { configureFakeBackend } from \"./_helpers\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nif (process.env.REACT_APP_ENV === \"demo\") {\n  // setup fake backend\n  configureFakeBackend();\n}\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}