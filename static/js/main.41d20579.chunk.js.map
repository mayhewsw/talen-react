{"version":3,"sources":["_helpers/history.ts","_reducers/authentication.reducer.ts","_reducers/data.reducer.ts","_reducers/alert.reducer.ts","_reducers/util.reducer.ts","_reducers/index.ts","_utils/types.ts","_reducers/registration.reducer.ts","_reducers/users.reducer.ts","_helpers/store.ts","_helpers/auth-header.ts","_helpers/fake-backend.js","_actions/alert.actions.ts","_services/user.service.js","_services/data.service.js","_actions/user.actions.ts","_actions/data.actions.ts","_actions/util.actions.ts","_components/PrivateRoute.jsx","_components/MainPanel.tsx","_components/Input.tsx","_pages/DatasetPage.tsx","_components/LabelButton.tsx","_components/Token.tsx","_components/Sentence.tsx","_components/Annotate.tsx","_pages/DocumentPage.tsx","_pages/HomePage.tsx","_pages/LoginPage.tsx","_pages/RegisterPage.jsx","App/App.jsx","index.jsx"],"names":["history","createBrowserHistory","initialState","loggedIn","user","JSON","parse","localStorage","getItem","loggingIn","emptyState","username","access_token","items","prevDoc","nextDoc","status","words","labels","labelset","path","isAnnotated","type","message","formState","password","rootReducer","combineReducers","authentication","state","action","registration","registering","users","data","curr_ind","indexOf","docId","length","newLabels","alert","util","newState","loggerMiddleware","createLogger","store","createStore","composeWithDevTools","applyMiddleware","thunkMiddleware","authHeader","Authorization","alldata","sentences","alertActions","success","error","clear","userService","login","requestOptions","method","headers","body","stringify","fetch","then","handleResponse","console","log","setItem","logout","register","getAll","getById","id","update","delete","removeItem","response","text","ok","statusText","Promise","reject","dataService","getDatasets","saveDocument","loadDocument","dataset","docid","getDocuments","userActions","dispatch","push","failure","toString","request","dataActions","redirectToLogin","loadStatus","setLabels","error_text","setTimeout","changeForm","PrivateRoute","Component","component","rest","render","props","to","pathname","from","location","MainPanel","Navbar","bg","expand","fixed","Container","Brand","href","Toggle","aria-controls","Collapse","className","Text","this","match","params","hideLoginButton","userName","children","React","connectedMainPanel","withRouter","connect","Input","changeInput","bind","event","value","target","name","handleChange","label","model","fsv","Form","Group","Label","Control","defaultValue","onChange","connectedInput","values","DatasetPage","documentIDs","annotatedDocumentIDs","ListGroup","map","index","Item","key","variant","undefined","Badge","actionCreators","connectedDocumentPage","LabelButton","Button","onClick","bsPrefix","join","style","background","color","Token","myRef","createRef","evt","buttons","mouseup","document","addEventListener","_handleContextMenu","preventDefault","button","classList","contains","mousedown","set_label","tag","split","pop","label_button_list","Object","keys","spacer_list","spacer_style","next_token_is_entity","selected","class_list","onMouseDown","handleDown","onMouseUp","handleUp","onMouseOver","handleOver","ref","form","Overlay","show","show_popover","current","placement","transition","Popover","Content","Sentence","mouseIsDown","selected_range","popover_index","rowMouseDown","rowMouseUp","isActive","start","end","setState","updateRange","setFocus","checkClearRange","tgt","i","first","last","tmp","sent","tok","selected_keyword","tokenDown","tokenUp","showPopoverFunc","Annotate","activeSent","isSaved","loadAll","arr","subarr","from_index","sl","l","inds","loop","j","sent_index","word_slice","slice","phrase_locations","find_csa","forEach","ind","cloneDeep","tuple","phrase_sent","phrase_start","phrase_end","pref","next","startsWith","newDoc","hasLabel","confirmed","window","confirm","url","Row","Col","md","Card","Body","lab","setLabel","sendLabels","ButtonGroup","buttonPush","uplink","connectedAnnotate","DocumentPage","HomePage","datasetIDs","connectedDatasetPage","LoginPage","handleSubmit","e","onSubmit","connectedLoginPage","RegisterPage","firstName","lastName","submitted","htmlFor","connectedRegisterPage","App","listen","clearAlerts","exact","connectedApp","realFetch","opts","resolve","endsWith","responseJson","token","urlParts","URLSearchParams","get","urlParams","configureFakeBackend","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.41d20579.chunk.js","sourcesContent":["import { createBrowserHistory } from \"history\";\n\nexport const history = createBrowserHistory();\n","import {\n  AuthTypes,\n  AuthState,\n  LOGIN_FAILURE,\n  LOGIN_REQUEST,\n  LOGIN_SUCCESS,\n  LOGOUT,\n} from \"../_utils/types\";\n\n//'username':'', 'access_token': ''\nlet user = JSON.parse(localStorage.getItem(\"user\") || \"{}\");\nconst initialState = {\n  loggedIn: false, // TODO: how to tell if someone is logged in or not? Answer: it might not matter... all of that is handled on the backend. If that's the case, then we can delete loggedIn and loggingIn here.\n  user: user,\n  loggingIn: false,\n};\n\nconst emptyState = {\n  loggedIn: false,\n  loggingIn: false,\n  user: {\n    username: \"\",\n    access_token: \"\",\n  },\n};\n\nexport function authentication(\n  state = initialState,\n  action: AuthTypes\n): AuthState {\n  switch (action.type) {\n    case LOGIN_REQUEST:\n      return {\n        ...state,\n        loggingIn: true,\n        user: action.user,\n      };\n    case LOGIN_SUCCESS:\n      return {\n        loggingIn: false,\n        loggedIn: true,\n        user: action.user,\n      };\n    case LOGIN_FAILURE:\n      return emptyState;\n    case LOGOUT:\n      return emptyState;\n    default:\n      return state;\n  }\n}\n","import {\n  DataTypes,\n  DataState,\n  GETDATASETS_SUCCESS,\n  GETDOCS_SUCCESS,\n  LOADSTATUS,\n  LOADDOC_SUCCESS,\n  SETLABELS,\n} from \"../_utils/types\";\n\nconst initialState: DataState = {\n  items: [],\n  prevDoc: \"\",\n  nextDoc: \"\",\n  status: \"\",\n  words: [[]],\n  labels: [[]],\n  labelset: [],\n  path: \"\",\n  isAnnotated: false,\n};\n\nexport function data(state = initialState, action: DataTypes): DataState {\n  switch (action.type) {\n    case GETDATASETS_SUCCESS:\n      return { ...state, items: action.data };\n    case GETDOCS_SUCCESS:\n      return {\n        ...state,\n        items: action.data,\n      };\n    case LOADSTATUS:\n      var curr_ind = action.data[\"documentIDs\"].indexOf(action.docId);\n      var prevDoc = action.data[\"documentIDs\"][curr_ind - 1];\n      var nextDoc = action.data[\"documentIDs\"][curr_ind + 1];\n      return {\n        ...state,\n        prevDoc: prevDoc,\n        nextDoc: nextDoc,\n        status: `On document ${curr_ind + 1} out of ${\n          action.data[\"documentIDs\"].length\n        }.`,\n      };\n    case LOADDOC_SUCCESS:\n      return {\n        ...state,\n        words: action.data[\"sentences\"],\n        labels: action.data[\"labels\"],\n        labelset: action.data[\"labelset\"],\n        path: action.data[\"path\"],\n        isAnnotated: action.data[\"isAnnotated\"],\n      };\n    case SETLABELS:\n      return {\n        ...state,\n        labels: action.newLabels,\n      };\n    default:\n      return state;\n  }\n}\n","import {\n  MessageTypes,\n  ALERT_SUCCESS,\n  ALERT_ERROR,\n  ALERT_CLEAR,\n} from \"../_utils/types\";\n\ninterface AlertState {\n  type: string;\n  message: string;\n}\n\nconst initialState: AlertState = {\n  type: \"\",\n  message: \"\",\n};\n\nexport function alert(state = initialState, action: MessageTypes): AlertState {\n  switch (action.type) {\n    case ALERT_SUCCESS:\n      return {\n        type: \"alert-success\",\n        message: action.message,\n      };\n    case ALERT_ERROR:\n      return {\n        type: \"alert-danger\",\n        message: action.message,\n      };\n    case ALERT_CLEAR:\n      return { type: \"\", message: \"\" };\n    default:\n      return state;\n  }\n}\n","import { UtilTypes, UtilState, CHANGE_FORM } from \"../_utils/types\";\n\nconst initialState: UtilState = {\n  formState: {\n    username: \"\",\n    password: \"\",\n  },\n};\n\nexport function util(state = initialState, action: UtilTypes): UtilState {\n  switch (action.type) {\n    case CHANGE_FORM:\n      return {\n        formState: {\n          ...state.formState,\n          ...action.newState,\n        },\n      };\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from \"redux\";\n\nimport { authentication } from \"./authentication.reducer\";\nimport { registration } from \"./registration.reducer\";\nimport { users } from \"./users.reducer\";\nimport { data } from \"./data.reducer\";\nimport { alert } from \"./alert.reducer\";\nimport { util } from \"./util.reducer\";\n\nconst rootReducer = combineReducers({\n  authentication,\n  registration,\n  users,\n  data,\n  alert,\n  util,\n});\n\nexport default rootReducer;\n","export interface User {\n  username: string;\n  access_token: string;\n}\n\nexport interface AuthState {\n  loggedIn: boolean;\n  loggingIn: boolean;\n  user: User;\n}\n\nexport interface DataState {\n  items: any[];\n  prevDoc?: any;\n  nextDoc?: any;\n  status?: string;\n  words: string[][];\n  labels: string[][];\n  labelset: any;\n  path: string;\n  isAnnotated: boolean;\n}\n\nexport interface UtilState {\n  formState: {\n    [key: string]: number | string;\n  };\n}\n\nexport interface State {\n  authentication: AuthState;\n  // loggedIn: boolean;\n  // userName: string;\n  // dataset: string;\n\n  // currentlySending: boolean;\n  util: UtilState;\n  errorMessage: string;\n  data: DataState;\n  // TODO: include AlertState here somehow?\n}\n\nexport const LOAD_DOCUMENT = \"LOAD_DOCUMENT\";\nexport const SAVE_DOCUMENT = \"SAVE_DOCUMENT\";\nexport const CHANGE_FORM = \"CHANGE_FORM\";\nexport const SET_AUTH = \"SET_AUTH\";\nexport const SENDING_REQUEST = \"SENDING_REQUEST\";\nexport const LOADING_AUTH = \"LOADING_AUTH\";\nexport const SET_ERROR_MESSAGE = \"SET_ERROR_MESSAGE\";\nexport const SET_DATA = \"SET_DATA\";\nexport const ALERT_SUCCESS = \"ALERT_SUCCESS\";\nexport const ALERT_ERROR = \"ALERT_ERROR\";\nexport const ALERT_CLEAR = \"ALERT_CLEAR\";\nexport const REGISTER_REQUEST = \"DATA_REGISTER_REQUEST\";\nexport const REGISTER_SUCCESS = \"DATA_REGISTER_SUCCESS\";\nexport const REGISTER_FAILURE = \"DATA_REGISTER_FAILURE\";\nexport const LOGIN_REQUEST = \"DATA_LOGIN_REQUEST\";\nexport const LOGIN_SUCCESS = \"DATA_LOGIN_SUCCESS\";\nexport const LOGIN_FAILURE = \"DATA_LOGIN_FAILURE\";\nexport const LOGOUT = \"DATA_LOGOUT\";\nexport const GETALL_REQUEST = \"DATA_GETALL_REQUEST\";\nexport const GETALL_SUCCESS = \"DATA_GETALL_SUCCESS\";\nexport const GETALL_FAILURE = \"DATA_GETALL_FAILURE\";\nexport const GETDATASETS_SUCCESS = \"GETDATASETS_SUCCESS\";\nexport const GETDOCS_SUCCESS = \"GETDOCS_SUCCESS\";\nexport const LOADDOC_SUCCESS = \"LOADDOC_SUCCESS\";\nexport const SAVEDOC_SUCCESS = \"SAVEDOC_SUCCESS\";\nexport const LOADSTATUS = \"LOADSTATUS\";\nexport const SETLABELS = \"SETLABELS\";\nexport const DELETE_REQUEST = \"DATA_DELETE_REQUEST\";\nexport const DELETE_SUCCESS = \"DATA_DELETE_SUCCESS\";\nexport const DELETE_FAILURE = \"DATA_DELETE_FAILURE\";\n\ninterface ChangeFormAction {\n  type: typeof CHANGE_FORM;\n  newState: any; // FIXME: any\n}\n\ninterface LoadDocumentAction {\n  type: typeof LOAD_DOCUMENT;\n  docid: string;\n  dataset: string;\n}\ninterface SaveDocumentAction {\n  type: typeof SAVE_DOCUMENT;\n  docid: string;\n  dataset: string;\n}\ninterface SetAuthAction {\n  type: typeof SET_AUTH;\n  newState: boolean;\n  username: string | null;\n}\n\ninterface SuccessAction {\n  type: typeof ALERT_SUCCESS;\n  message: string;\n}\ninterface ErrorAction {\n  type: typeof ALERT_ERROR;\n  message: string;\n}\ninterface ClearAction {\n  type: typeof ALERT_CLEAR;\n}\n\ninterface GetDatasetsAction {\n  type: typeof GETDATASETS_SUCCESS;\n  data: any[];\n}\n\ninterface GetDocsAction {\n  type: typeof GETDOCS_SUCCESS;\n  data: any[];\n}\n\ninterface RegisterRequestAction {\n  type: typeof REGISTER_REQUEST;\n  registering: boolean;\n}\n\ninterface RegisterSuccessAction {\n  type: typeof REGISTER_SUCCESS;\n}\n\ninterface RegisterFailureAction {\n  type: typeof REGISTER_FAILURE;\n}\n\ninterface LoadStatusAction {\n  type: typeof LOADSTATUS;\n  data: {\n    documentIDs: string[];\n  };\n  docId: string;\n}\n\ninterface LoadDocsAction {\n  type: typeof LOADDOC_SUCCESS;\n  data: {\n    sentences: string[][];\n    labels: string[][];\n    path: string;\n    isAnnotated: boolean;\n    labelset: any;\n  };\n}\n\ninterface SetLabelsAction {\n  type: typeof SETLABELS;\n  newLabels: any[];\n}\n\ninterface LoginRequestAction {\n  type: typeof LOGIN_REQUEST;\n  user: User;\n}\n\ninterface LoginSuccessAction {\n  type: typeof LOGIN_SUCCESS;\n  user: User;\n}\n\ninterface LoginFailureAction {\n  type: typeof LOGIN_FAILURE;\n  error: string;\n}\n\ninterface LogoutAction {\n  type: typeof LOGOUT;\n}\n\nexport type RegistrationTypes =\n  | RegisterRequestAction\n  | RegisterSuccessAction\n  | RegisterFailureAction;\nexport type AuthTypes =\n  | LoginRequestAction\n  | LoginSuccessAction\n  | LoginFailureAction\n  | LogoutAction;\nexport type DataTypes =\n  | GetDatasetsAction\n  | GetDocsAction\n  | LoadStatusAction\n  | LoadDocsAction\n  | SetLabelsAction;\nexport type UtilTypes = ChangeFormAction;\nexport type MessageTypes = SuccessAction | ErrorAction | ClearAction;\nexport type DocumentTypes =\n  | LoadDocumentAction\n  | SaveDocumentAction\n  | SetAuthAction;\n","import {\n  REGISTER_SUCCESS,\n  REGISTER_FAILURE,\n  REGISTER_REQUEST,\n  RegistrationTypes,\n} from \"../_utils/types\";\n\nexport function registration(state = {}, action: RegistrationTypes) {\n  switch (action.type) {\n    case REGISTER_REQUEST:\n      return { registering: true };\n    case REGISTER_SUCCESS:\n      return {};\n    case REGISTER_FAILURE:\n      return {};\n    default:\n      return state;\n  }\n}\n","// import {\n// GETALL_FAILURE,\n// GETALL_SUCCESS,\n// GETALL_REQUEST,\n// DELETE_SUCCESS,\n// DELETE_REQUEST,\n// DELETE_FAILURE,\n// userTypes\n// } from \"../_utils/types\";\n\nexport function users(state = {}, action: any) {\n  switch (action.type) {\n    //   case GETALL_REQUEST:\n    //     return {\n    //       loading: true,\n    //     };\n    //   case GETALL_SUCCESS:\n    //     return {\n    //       items: action.users,\n    //     };\n    //   case GETALL_FAILURE:\n    //     return {\n    //       error: action.error,\n    //     };\n    //   case DELETE_REQUEST:\n    //     // add 'deleting:true' property to user being deleted\n    //     return {\n    //       ...state,\n    //       items: state.items.map((user) =>\n    //         user.id === action.id ? { ...user, deleting: true } : user\n    //       ),\n    //     };\n    //   case DELETE_SUCCESS:\n    //     // remove deleted user from state\n    //     return {\n    //       items: state.items.filter((user) => user.id !== action.id),\n    //     };\n    //   case DELETE_FAILURE:\n    //     // remove 'deleting:true' property and add 'deleteError:[error]' property to user\n    //     return {\n    //       ...state,\n    //       items: state.items.map((user) => {\n    //         if (user.id === action.id) {\n    //           // make copy of user without 'deleting:true' property\n    //           const { deleting, ...userCopy } = user;\n    //           // return copy of user with 'deleteError:[error]' property\n    //           return { ...userCopy, deleteError: action.error };\n    //         }\n\n    //         return user;\n    //       }),\n    //     };\n    default:\n      return state;\n  }\n}\n","import { createStore, applyMiddleware } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport thunkMiddleware from \"redux-thunk\";\nimport { createLogger } from \"redux-logger\";\nimport rootReducer from \"../_reducers\";\n\nconst loggerMiddleware = createLogger();\n\nexport const store = createStore(\n  rootReducer,\n  composeWithDevTools(applyMiddleware(thunkMiddleware, loggerMiddleware))\n);\n","export function authHeader() {\n  // return authorization header with jwt token\n  let user = JSON.parse(localStorage.getItem(\"user\") || \"\");\n  if (user && user.access_token) {\n    return { Authorization: \"JWT \" + user.access_token };\n  } else {\n    return {};\n  }\n}\n","let alldata = {\n    \"dataset1\" : {\n        \"doc1\":{\n            sentences: [[\"Here\", \"is\", \"a\", \"word\", \".\"]],\n            labels: [[\"O\",\"O\",\"O\",\"O\",\"O\"]],\n        }, \n        \"doc2\":{\n            sentences: [[\"Stephen\", \"is\", \"a\", \"person\", \".\"]],\n            labels: [[\"O\",\"O\",\"O\",\"O\",\"O\"]],\n        }\n    },\n    \"dataset2\" : {\n        \"news1\":{\n            sentences: [[\"Breaking\", \"news\", \"at\", \"one\", \".\"]],\n            labels: [[\"O\",\"O\",\"O\",\"O\",\"O\"]],\n        }, \n        \"news2\":{\n            sentences: [[\"The\", \"second\", \"document\", \"exists\", \"!\"]],\n            labels: [[\"O\",\"O\",\"O\",\"O\",\"O\"]],\n        }\n    }\n}\n\nexport function configureFakeBackend() {\n    let realFetch = window.fetch;\n    window.fetch = function (url, opts) {\n        return new Promise((resolve, reject) => {\n            // wrap in timeout to simulate server api call\n            setTimeout(() => {\n\n                // authenticate\n                if (url.endsWith('/users/authenticate') && opts.method === 'POST') {\n                    // get parameters from post request\n                    let params = JSON.parse(opts.body);\n\n                    if (true) {\n                        // if login details are valid return user details and fake jwt token\n                        let responseJson = {\n                            id: \"tmp\",\n                            username: \"tmp\",\n                            firstName: \"tmp\",\n                            lastName: \"tmp\",\n                            token: 'fake-jwt-token'\n                        };\n                        resolve({ ok: true, text: () => Promise.resolve(JSON.stringify(responseJson)) });\n                    } else {\n                        // else return error\n                        reject('Username or password is incorrect');\n                    }\n\n                    return;\n                }\n\n                if (url.endsWith('/datasetlist') && opts.method === 'GET') {\n                    let responseJson = {\n                        datasetIDs: [\"dataset1\", \"dataset2\"]\n                    };\n                    resolve({ ok: true, text: () => Promise.resolve(JSON.stringify(responseJson)) });\n                    return\n                }\n\n                if (url.indexOf(\"loaddataset\") > -1 && opts.method === 'GET') {\n                    //let params = JSON.parse(opts.body);\n                    let urlParts = url.split('?');\n                    const urlParams = new URLSearchParams(urlParts[urlParts.length - 1]);\n                    let dataset = urlParams.get(\"dataset\");\n                    \n \n\n                    //console.log(\"Got here!\", params)\n                    let responseJson = {\n                        documentIDs: Object.keys(alldata[dataset]),\n                        annotatedDocumentIDs: []\n                    };\n                    resolve({ ok: true, text: () => Promise.resolve(JSON.stringify(responseJson)) });\n                    return\n                }\n\n                if (url.indexOf(\"loaddoc\") > -1 && opts.method === 'GET') {\n                    let urlParts = url.split('?');\n                    const urlParams = new URLSearchParams(urlParts[urlParts.length - 1]);\n                    let dataset = urlParams.get(\"dataset\");\n                    let docid = urlParams.get(\"docid\")\n\n                    let responseJson = alldata[dataset][docid];\n                    responseJson.labelset = {\"PER\":\"yellow\", \"LOC\":\"yellowgreen\", \"ORG\":\"lightblue\"}\n                \n                    resolve({ ok: true, text: () => Promise.resolve(JSON.stringify(responseJson)) });\n                    return\n                }\n\n                // get users\n                // if (url.endsWith('/users') && opts.method === 'GET') {\n                //     // check for fake auth token in header and return users if valid, this security is implemented server side in a real application\n                //     if (opts.headers && opts.headers.Authorization === 'Bearer fake-jwt-token') {\n                //         resolve({ ok: true, json: () => Promise.resolve(users)});\n                //     } else {\n                //         // return 401 not authorised if token is null or invalid\n                //         reject('Unauthorised');\n                //     }\n\n                //     return;\n                // }\n\n                // // get user by id\n                // if (url.match(/\\/users\\/\\d+$/) && opts.method === 'GET') {\n                //     // check for fake auth token in header and return user if valid, this security is implemented server side in a real application\n                //     if (opts.headers && opts.headers.Authorization === 'Bearer fake-jwt-token') {\n                //         // find user by id in users array\n                //         let urlParts = url.split('/');\n                //         let id = parseInt(urlParts[urlParts.length - 1]);\n                //         let matchedUsers = users.filter(user => { return user.id === id; });\n                //         let user = matchedUsers.length ? matchedUsers[0] : null;\n\n                //         // respond 200 OK with user\n                //         resolve({ ok: true, json: () => user});\n                //     } else {\n                //         // return 401 not authorised if token is null or invalid\n                //         reject('Unauthorised');\n                //     }\n\n                //     return;\n                // }\n\n                // register user\n                // if (url.endsWith('/users/register') && opts.method === 'POST') {\n                //     // get new user object from post body\n                //     let newUser = JSON.parse(opts.body);\n\n                //     // validation\n                //     let duplicateUser = users.filter(user => { return user.username === newUser.username; }).length;\n                //     if (duplicateUser) {\n                //         reject('Username \"' + newUser.username + '\" is already taken');\n                //         return;\n                //     }\n\n                //     // save new user\n                //     newUser.id = users.length ? Math.max(...users.map(user => user.id)) + 1 : 1;\n                //     users.push(newUser);\n                //     localStorage.setItem('users', JSON.stringify(users));\n\n                //     // respond 200 OK\n                //     resolve({ ok: true, json: () => Promise.resolve({}) });\n\n                //     return;\n                // }\n\n                // delete user\n                // if (url.match(/\\/users\\/\\d+$/) && opts.method === 'DELETE') {\n                //     // check for fake auth token in header and return user if valid, this security is implemented server side in a real application\n                //     if (opts.headers && opts.headers.Authorization === 'Bearer fake-jwt-token') {\n                //         // find user by id in users array\n                //         let urlParts = url.split('/');\n                //         let id = parseInt(urlParts[urlParts.length - 1]);\n                //         for (let i = 0; i < users.length; i++) {\n                //             let user = users[i];\n                //             if (user.id === id) {\n                //                 // delete user\n                //                 users.splice(i, 1);\n                //                 localStorage.setItem('users', JSON.stringify(users));\n                //                 break;\n                //             }\n                //         }\n\n                //         // respond 200 OK\n                //         resolve({ ok: true, json: () => Promise.resolve({}) });\n                //     } else {\n                //         // return 401 not authorised if token is null or invalid\n                //         reject('Unauthorised');\n                //     }\n\n                //     return;\n                // }\n\n                // pass through any requests not handled above\n                realFetch(url, opts).then(response => resolve(response));\n\n            }, 10);\n        });\n    }\n}","import {\n  MessageTypes,\n  ALERT_SUCCESS,\n  ALERT_CLEAR,\n  ALERT_ERROR,\n} from \"../_utils/types\";\n\nexport const alertActions = {\n  success,\n  error,\n  clear,\n};\n\nfunction success(message: string): MessageTypes {\n  return { type: ALERT_SUCCESS, message };\n}\n\nfunction error(message: string): MessageTypes {\n  return { type: ALERT_ERROR, message };\n}\n\nfunction clear(): MessageTypes {\n  return { type: ALERT_CLEAR };\n}\n","import { authHeader } from \"../_helpers\";\n\nexport const userService = {\n  login,\n  logout,\n  register,\n  getAll,\n  getById,\n  update,\n  delete: _delete,\n};\n\nfunction login(username, password) {\n  const requestOptions = {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ username, password }),\n  };\n\n  return fetch(`http://localhost:5000/users/authenticate`, requestOptions)\n    .then(handleResponse)\n    .then((user) => {\n      // store user details and jwt token in local storage to keep user logged in between page refreshes\n      console.log(user);\n      localStorage.setItem(\"user\", JSON.stringify(user));\n\n      return user;\n    });\n}\n\nfunction logout() {\n  // remove user from local storage to log user out\n  localStorage.removeItem(\"user\");\n}\n\nfunction getAll() {\n  const requestOptions = {\n    method: \"GET\",\n    headers: authHeader(),\n  };\n\n  return fetch(`http://localhost:5000/users`, requestOptions).then(\n    handleResponse\n  );\n}\n\nfunction getById(id) {\n  const requestOptions = {\n    method: \"GET\",\n    headers: authHeader(),\n  };\n\n  return fetch(`http://localhost:5000/users/${id}`, requestOptions).then(\n    handleResponse\n  );\n}\n\nfunction register(user) {\n  const requestOptions = {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(user),\n  };\n\n  return fetch(`http://localhost:5000/users/register`, requestOptions).then(\n    handleResponse\n  );\n}\n\nfunction update(user) {\n  const requestOptions = {\n    method: \"PUT\",\n    headers: { ...authHeader(), \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(user),\n  };\n\n  return fetch(`http://localhost:5000/users/${user.id}`, requestOptions).then(\n    handleResponse\n  );\n}\n\n// prefixed function name with underscore because delete is a reserved word in javascript\nfunction _delete(id) {\n  const requestOptions = {\n    method: \"DELETE\",\n    headers: authHeader(),\n  };\n\n  return fetch(`http://localhost:5000/users/${id}`, requestOptions).then(\n    handleResponse\n  );\n}\n\nfunction handleResponse(response) {\n  return response.text().then((text) => {\n    const data = text && JSON.parse(text);\n    if (!response.ok) {\n      if (response.status === 401) {\n        // auto logout if 401 response returned from api\n        logout();\n        // This is unsupported in Typescript?\n        //location.reload(true);\n      }\n\n      const error = (data && data.message) || response.statusText;\n      return Promise.reject(error);\n    }\n\n    return data;\n  });\n}\n","import { authHeader } from \"../_helpers\";\n\nexport const dataService = {\n  getDatasets,\n  saveDocument,\n  loadDocument,\n  getDocuments,\n};\n\nfunction getDatasets() {\n  const requestOptions = {\n    method: \"GET\",\n    headers: authHeader(),\n  };\n\n  return fetch(`http://localhost:5000/datasetlist`, requestOptions)\n    .then(handleResponse)\n    .then((data) => {\n      return data;\n    });\n}\n\nfunction getDocuments(dataset) {\n  const requestOptions = {\n    method: \"GET\",\n    headers: authHeader(),\n  };\n\n  return fetch(\n    `http://localhost:5000/loaddataset?dataset=${dataset}`,\n    requestOptions\n  )\n    .then(handleResponse)\n    .then((data) => {\n      return data;\n    });\n}\n\nfunction saveDocument(data) {\n  console.log(\"in service\");\n  console.log(data);\n  const requestOptions = {\n    headers: { ...authHeader(), \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(data),\n    method: \"POST\",\n  };\n\n  return fetch(`http://localhost:5000/savedoc`, requestOptions)\n    .then(handleResponse)\n    .then((data) => {\n      return data;\n    });\n}\n\nfunction loadDocument(dataset, docid) {\n  const requestOptions = {\n    headers: authHeader(),\n    method: \"GET\",\n  };\n\n  return fetch(\n    `http://localhost:5000/loaddoc?docid=${docid}&dataset=${dataset}`,\n    requestOptions\n  )\n    .then(handleResponse)\n    .then((data) => {\n      return data;\n    });\n}\n\nfunction handleResponse(response) {\n  return response.text().then((text) => {\n    const data = text && JSON.parse(text);\n    if (!response.ok) {\n      console.log(\"there is error!\");\n      const error = (data && data.message) || response.statusText;\n      return Promise.reject(error);\n    }\n\n    return data;\n  });\n}\n","import { userService } from \"../_services\";\nimport { alertActions } from \".\";\nimport { history } from \"../_helpers\";\nimport {\n  LOGIN_FAILURE,\n  LOGIN_REQUEST,\n  LOGIN_SUCCESS,\n  LOGOUT,\n  REGISTER_FAILURE,\n  REGISTER_SUCCESS,\n  REGISTER_REQUEST,\n  User,\n  // GETALL_FAILURE,\n  // GETALL_REQUEST,\n  // GETALL_SUCCESS,\n  // DELETE_FAILURE,\n  // DELETE_REQUEST,\n  // DELETE_SUCCESS,\n} from \"../_utils/types\";\n\nexport const userActions = {\n  login,\n  logout,\n  register,\n  // getAll,\n  // delete: _delete,\n};\n\nfunction login(username: string, password: string) {\n  return (dispatch: any) => {\n    dispatch(request({ username: username, access_token: \"?\" }));\n\n    userService.login(username, password).then(\n      (user) => {\n        dispatch(success(user));\n        history.push(\"/\");\n      },\n      (error) => {\n        dispatch(failure(error.toString()));\n        dispatch(alertActions.error(error.toString()));\n      }\n    );\n  };\n\n  function request(user: User) {\n    return { type: LOGIN_REQUEST, user };\n  }\n  function success(user: User) {\n    return { type: LOGIN_SUCCESS, user };\n  }\n  function failure(error: string) {\n    return { type: LOGIN_FAILURE, error };\n  }\n}\n\nfunction logout() {\n  return (dispatch: any) => {\n    userService.logout();\n    dispatch({ type: LOGOUT });\n  };\n}\n\nfunction register(user: User) {\n  return (dispatch: any) => {\n    dispatch(request(user));\n\n    userService.register(user).then(\n      (user) => {\n        dispatch(success(user));\n        history.push(\"/login\");\n        dispatch(alertActions.success(\"Registration successful\"));\n      },\n      (error) => {\n        dispatch(failure(error.toString()));\n        dispatch(alertActions.error(error.toString()));\n      }\n    );\n  };\n\n  function request(user: User) {\n    return { type: REGISTER_REQUEST, user };\n  }\n  function success(user: User) {\n    return { type: REGISTER_SUCCESS, user };\n  }\n  function failure(error: User) {\n    return { type: REGISTER_FAILURE, error };\n  }\n}\n\n// function getAll() {\n//   return (dispatch) => {\n//     dispatch(request());\n\n//     userService.getAll().then(\n//       (users) => dispatch(success(users)),\n//       (error) => dispatch(failure(error.toString()))\n//     );\n//   };\n\n//   function request() {\n//     return { type: GETALL_REQUEST };\n//   }\n//   function success(users) {\n//     return { type: GETALL_SUCCESS, users };\n//   }\n//   function failure(error) {\n//     return { type: GETALL_FAILURE, error };\n//   }\n// }\n\n// // prefixed function name with underscore because delete is a reserved word in javascript\n// function _delete(id) {\n//   return (dispatch) => {\n//     dispatch(request(id));\n\n//     userService.delete(id).then(\n//       (user) => dispatch(success(id)),\n//       (error) => dispatch(failure(id, error.toString()))\n//     );\n//   };\n\n//   function request(id) {\n//     return { type: DELETE_REQUEST, id };\n//   }\n//   function success(id) {\n//     return { type: DELETE_SUCCESS, id };\n//   }\n//   function failure(id, error) {\n//     return { type: DELETE_FAILURE, id, error };\n//   }\n// }\n","import {\n  GETDATASETS_SUCCESS,\n  GETDOCS_SUCCESS,\n  LOADSTATUS,\n  LOADDOC_SUCCESS,\n  SETLABELS,\n  SAVEDOC_SUCCESS,\n  MessageTypes,\n} from \"../_utils/types\";\n\nimport { dataService } from \"../_services\";\nimport { alertActions } from \".\";\nimport { history } from \"../_helpers\";\nimport { Dispatch } from \"react\";\n\nexport const dataActions = {\n  getDatasets,\n  saveDocument,\n  loadDocument,\n  getDocuments,\n  loadStatus,\n  setLabels,\n};\n\nfunction redirectToLogin(dispatch: Dispatch<MessageTypes>, error_text: string) {\n  // Who decides on this text? Wouldn't it be better if we used an authorization code? 401\n  if (error_text === \"UNAUTHORIZED\") {\n    dispatch(alertActions.error(\"Logged out! Redirecting to login page...\"));\n    setTimeout(() => {\n      history.push(\"/login\");\n    }, 500);\n  } else {\n    dispatch(alertActions.error(error_text.toString()));\n  }\n}\n\nfunction getDatasets() {\n  return (dispatch: Dispatch<any>) => {\n    dataService.getDatasets().then(\n      (data: any[]) => {\n        dispatch(success(data));\n      },\n      (error: any) => {\n        redirectToLogin(dispatch, error);\n      }\n    );\n  };\n\n  function success(data: any[]) {\n    return { type: GETDATASETS_SUCCESS, data };\n  }\n}\n\n// this is super weird right? why load documents just to get a status...\nfunction loadStatus(dataset: string, docId: string) {\n  return (dispatch: Dispatch<any>) => {\n    dataService.getDocuments(dataset).then(\n      (data: any) => {\n        dispatch(success(data));\n      },\n      (error: any) => {\n        redirectToLogin(dispatch, error);\n      }\n    );\n  };\n\n  function success(data: any) {\n    return { type: LOADSTATUS, data, docId };\n  }\n}\n\nfunction getDocuments(dataset: string) {\n  return (dispatch: Dispatch<any>) => {\n    dataService.getDocuments(dataset).then(\n      (data: any) => {\n        dispatch(success(data));\n      },\n      (error: any) => {\n        redirectToLogin(dispatch, error);\n      }\n    );\n  };\n\n  function success(data: any[]) {\n    return { type: GETDOCS_SUCCESS, data };\n  }\n}\n\nfunction setLabels(newLabels: any[]) {\n  return {\n    type: SETLABELS,\n    newLabels,\n  };\n}\n\nfunction loadDocument(dataset: string, docid: string) {\n  return (dispatch: Dispatch<any>) => {\n    dataService.loadDocument(dataset, docid).then(\n      (data: any) => {\n        console.log(data);\n        dispatch(success(data));\n      },\n      (error: any) => {\n        redirectToLogin(dispatch, error);\n      }\n    );\n  };\n\n  function success(data: any) {\n    return { type: LOADDOC_SUCCESS, data };\n  }\n}\n\nfunction saveDocument(data: any) {\n  return (dispatch: Dispatch<any>) => {\n    dataService.saveDocument(data).then(\n      (data: any) => {\n        console.log(data);\n        dispatch(success(data));\n      },\n      (error: any) => {\n        console.log(error);\n        redirectToLogin(dispatch, error);\n      }\n    );\n  };\n\n  function success(data: any) {\n    return { type: SAVEDOC_SUCCESS, data };\n  }\n}\n","import { CHANGE_FORM } from \"../_utils/types\";\n\nexport const changeForm = (newState: string) => {\n  console.log(\"inside login/changeForm\");\n  return { type: CHANGE_FORM, newState };\n};\n\nexport const utilActions = {\n  changeForm,\n};\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nexport const PrivateRoute = ({ component: Component, ...rest }) => (\n  <Route\n    {...rest}\n    render={(props) =>\n      localStorage.getItem(\"user\") ? (\n        <Component {...props} />\n      ) : (\n        <Redirect\n          to={{ pathname: \"/login\", state: { from: props.location } }}\n        />\n      )\n    }\n  />\n);\n","import React from \"react\";\nimport { Container, Navbar } from \"react-bootstrap\";\nimport { State } from \"../_utils/types\";\nimport { connect } from \"react-redux\";\nimport { withRouter, Link, RouteComponentProps } from \"react-router-dom\";\n\nclass MainPanel extends React.Component<MatchProps> {\n  render() {\n    return (\n      <div>\n        <Navbar bg=\"light\" expand=\"lg\" fixed=\"top\">\n          <Container>\n            <Navbar.Brand href=\"\">TALEN</Navbar.Brand>\n            <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n            <Navbar.Collapse id=\"basic-navbar-nav\">\n              <Navbar.Collapse className=\"mr-auto\">\n                <Navbar.Text className=\"px-2\">\n                  <Link to=\"/\">Home</Link>\n                </Navbar.Text>\n                <Navbar.Text className=\"px-2\">\n                  <Link to={`/dataset/${this.props.match.params.id}`}>\n                    {this.props.match.params.id}\n                  </Link>\n                </Navbar.Text>\n                <Navbar.Text className=\"px-2\">\n                  {this.props.match.params.docid}\n                </Navbar.Text>\n              </Navbar.Collapse>\n\n              {this.props.hideLoginButton ? null : (\n                <>\n                  <Navbar.Collapse className=\"justify-content-end\">\n                    {this.props.userName ? (\n                      <>\n                        <Navbar.Text className=\"px-3\">{`Signed in as: ${this.props.userName}`}</Navbar.Text>\n                        <Link to=\"/login\">Logout</Link>\n                      </>\n                    ) : (\n                      <Navbar.Text>\n                        <Link to=\"/login\">Login</Link>\n                      </Navbar.Text>\n                    )}\n                  </Navbar.Collapse>\n                </>\n              )}\n            </Navbar.Collapse>\n          </Container>\n        </Navbar>\n        <Container>{this.props.children}</Container>\n      </div>\n    );\n  }\n}\n\ninterface MatchProps extends RouteComponentProps<MatchParams> {\n  userName: string;\n  hideLoginButton?: boolean;\n}\n\ninterface MatchParams {\n  id: string;\n  docid: string;\n}\n\nconst mapStateToProps = (state: State) => ({\n  // TODO: this is not working!\n  // loggedIn: state.authentication.loggedIn,\n  userName: state.authentication.user.username,\n});\n\nconst mapDispatchToProps = (dispatch: Function) => ({});\n\nconst connectedMainPanel = withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(MainPanel)\n);\nexport { connectedMainPanel as MainPanel };\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { changeForm } from \"../_actions\";\nimport { State } from \"../_utils/types\";\nimport { Form } from \"react-bootstrap\";\n\n// TODO: who wrote this code? Where did I get it from?????\n\nclass Input extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n    this.changeInput = this.changeInput.bind(this);\n  }\n\n  changeInput(event: any) {\n    const value = event.target.value;\n    const name = event.target.name;\n    this.props.handleChange({ [name]: value });\n  }\n\n  render() {\n    const { label, type, name, model, formState } = this.props;\n\n    const fsv = formState[model];\n\n    return (\n      <Form.Group>\n        <Form.Label>{label}</Form.Label>\n        <Form.Control\n          type={type}\n          name={name}\n          defaultValue={fsv}\n          onChange={this.changeInput}\n        />\n      </Form.Group>\n    );\n  }\n}\n\ntype Props = {\n  label: string;\n  type: string;\n  name: string;\n  model: string;\n  formState: {\n    [key: string]: number | string;\n  };\n  handleChange: Function;\n};\n\nconst mapStateToProps = (state: State) => ({\n  formState: state.util.formState,\n});\n\nconst mapDispatchToProps = (dispatch: Function) => ({\n  handleChange: (values: any) => dispatch(changeForm(values)),\n});\n\nconst connectedInput = connect(mapStateToProps, mapDispatchToProps)(Input);\n\nexport { connectedInput as Input };\n","import React from \"react\";\nimport { Link, RouteComponentProps } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { ListGroup } from \"react-bootstrap\";\nimport { MainPanel } from \"../_components\";\nimport { dataActions } from \"../_actions\";\nimport { Badge } from \"react-bootstrap\";\n\n// This shows you all the documents in a given dataset.\nclass DatasetPage extends React.Component<MatchProps> {\n  componentDidMount() {\n    const { match } = this.props;\n    console.log(\"this doc is:\" + match.params.id);\n    this.props.getDocuments(match.params.id);\n  }\n\n  render() {\n    const { match, data } = this.props;\n    console.log(match.params.id);\n\n    console.log(data);\n\n    return (\n      <MainPanel>\n        <div className=\"col-md-12\">\n          {/* <h1>{match.params.id}</h1> */}\n\n          {data.items &&\n            data.items.documentIDs &&\n            data.items.annotatedDocumentIDs && (\n              <p>\n                There are {data.items.documentIDs.length} documents. Of these,{\" \"}\n                {data.items.annotatedDocumentIDs.length} have been annotated\n                (marked in green).\n              </p>\n            )}\n          <ListGroup>\n            {data.items &&\n              data.items.documentIDs &&\n              data.items.documentIDs.map((id: string, index: number) => (\n                <ListGroup.Item\n                  key={index}\n                  variant={\n                    data.items.annotatedDocumentIDs.indexOf(id) > -1\n                      ? \"success\"\n                      : undefined\n                  }\n                >\n                  <Badge\n                    className=\"sentence-badge\"\n                    key={\"badge-\" + index}\n                    variant={\n                      data.items.annotatedDocumentIDs.indexOf(id) > -1\n                        ? \"success\"\n                        : \"light\"\n                    }\n                  >\n                    {index + 1}\n                  </Badge>\n                  <Link to={{ pathname: `/dataset/${match.params.id}/${id}` }}>\n                    {id}\n                  </Link>\n                </ListGroup.Item>\n              ))}\n          </ListGroup>\n        </div>\n      </MainPanel>\n    );\n  }\n}\n\n// TODO: fix the any!!\ninterface MatchProps extends RouteComponentProps<MatchParams> {\n  getDocuments: any;\n  data: any;\n}\n\ninterface MatchParams {\n  id: string;\n  docid: string;\n}\n\n// TODO: make this STATE\nfunction mapState(state: any) {\n  const { authentication, data } = state;\n  const { user } = authentication;\n  return { user, data };\n}\n\nconst actionCreators = {\n  getDocuments: dataActions.getDocuments,\n};\n\nconst connectedDocumentPage = connect(mapState, actionCreators)(DatasetPage);\nexport { connectedDocumentPage as DatasetPage };\n","import React from \"react\";\nimport { Button } from \"react-bootstrap\";\n\nclass LabelButton extends React.Component<Props> {\n  render() {\n    return (\n      <Button\n        onClick={() => this.props.onClick()}\n        bsPrefix=\"custom-btn\"\n        className={[\"label-button\", this.props.label].join(\" \")}\n        style={{ background: this.props.color }}\n      >\n        {this.props.label}\n      </Button>\n    );\n  }\n}\n\nexport default LabelButton;\n\ntype Props = {\n  label: string;\n  onClick: Function;\n  color: string;\n};\n","import React from \"react\";\nimport { Popover, Overlay } from \"react-bootstrap\";\nimport LabelButton from \"./LabelButton\";\n\nclass Token extends React.Component<TokProps> {\n  private myRef = React.createRef<any>();\n\n  handleOver(evt: any) {\n    // if the left button is pressed\n    if (evt.buttons === 1) {\n      this.props.mouseup();\n    }\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"contextmenu\", this._handleContextMenu);\n  }\n\n  _handleContextMenu(event: any) {\n    event.preventDefault();\n  }\n\n  handleDown(evt: any) {\n    // console.log(evt.target.type) -> this will give type button\n\n    if (evt.button === 2) {\n      // don't allow right click to open a menu\n      console.log(\"right click down\");\n      //return\n    }\n\n    // only fire if you click on a token.\n    if (evt.target.classList.contains(\"token\")) {\n      this.props.mousedown();\n    }\n  }\n\n  handleUp(evt: any) {\n    if (evt.button === 2) {\n      // don't allow right click to open a menu\n      console.log(\"right click up\");\n      this.props.set_label(\"O\");\n      return;\n    }\n\n    // only fire if you click on a token.\n    //if(evt.target.classList.contains(\"token\")){\n    this.props.mouseup();\n    //}\n  }\n\n  render() {\n    const tag = this.props.label.split(\"-\").pop() || \"O\";\n    const label_button_list = Object.keys(this.props.labelset).map((label) => (\n      <LabelButton\n        key={label}\n        label={label}\n        color={this.props.labelset[label]}\n        onClick={() => this.props.set_label(label)}\n      />\n    ));\n\n    var spacer_list = [\"spacer\"];\n    var spacer_style = { background: \"transparent\" };\n    if (this.props.label !== \"O\" && this.props.next_token_is_entity) {\n      //spacer_list.push(tag || \"\");\n      spacer_style.background = this.props.labelset[tag];\n      spacer_list.push(\"label\");\n    }\n\n    if (\n      this.props.selected === \"highlightstart\" ||\n      this.props.selected === \"highlighted\"\n    ) {\n      spacer_list.push(\"highlighted\");\n    }\n    const class_list = [\n      \"token\",\n      \"nocopy\",\n      this.props.selected,\n      tag,\n      this.props.label === \"O\" ? null : \"label\",\n    ];\n\n    if (!this.props.next_token_is_entity && this.props.label[0] === \"B\") {\n      class_list.push(\"labelsingle\");\n    } else if (this.props.label[0] === \"B\") {\n      class_list.push(\"labelstart\");\n    } else if (this.props.label !== \"O\" && !this.props.next_token_is_entity) {\n      class_list.push(\"labelend\");\n    }\n\n    return (\n      <>\n        <span\n          className={class_list.join(\" \")}\n          onMouseDown={(evt) => this.handleDown(evt)}\n          onMouseUp={(evt) => this.handleUp(evt)}\n          onMouseOver={(evt) => this.handleOver(evt)}\n          style={{ background: this.props.labelset[tag] }}\n          ref={this.myRef}\n        >\n          {this.props.form}\n        </span>\n        {/*  this whitespace is needed to get correct line breaks! */}\n        <span className={spacer_list.join(\" \")} style={spacer_style}>\n          {\" \"}\n        </span>\n        <Overlay\n          show={this.props.show_popover}\n          target={this.myRef.current}\n          placement={\"bottom\"}\n          transition={false}\n        >\n          <Popover id=\"popover-container\">\n            <Popover.Content>\n              <div className=\"label-box\">{label_button_list}</div>\n            </Popover.Content>\n          </Popover>\n        </Overlay>\n      </>\n    );\n  }\n}\n\nexport default Token;\n\ntype TokProps = {\n  form: string;\n  label: string;\n  labelset: { [key: string]: string };\n  selected: string;\n  mousedown: any;\n  mouseup: any;\n  show_popover: boolean;\n  set_label: any;\n  next_token_is_entity: boolean;\n};\n","import React from \"react\";\nimport Token from \"./Token\";\nimport { Badge } from \"react-bootstrap\";\n\nclass Sentence extends React.Component<SentProps, State> {\n  constructor(props: any) {\n    super(props);\n\n    this.state = {\n      color: \"white\",\n      words: [[]],\n      labels: [[]],\n      path: \"\",\n      mouseIsDown: false,\n      selected_range: [-1, -1],\n      popover_index: -1,\n      prevDoc: \"\",\n      nextDoc: \"\",\n      status: \"\",\n    };\n\n    this.rowMouseDown = this.rowMouseDown.bind(this);\n    this.rowMouseUp = this.rowMouseUp.bind(this);\n  }\n\n  showPopoverFunc(index: number) {\n    return (\n      this.props.isActive &&\n      !this.state.mouseIsDown &&\n      index === this.state.selected_range[1]\n    );\n  }\n\n  updateRange(start: number, end: number) {\n    this.setState({ selected_range: [start, end] });\n  }\n\n  tokenUp(index: number) {\n    this.updateRange(this.state.selected_range[0], index);\n  }\n\n  tokenDown(index: number) {\n    this.updateRange(index, index);\n  }\n\n  rowMouseDown(evt: any) {\n    // if(evt.target.tagName !== \"BUTTON\"){\n    //   this.setState({mouseIsDown: true})\n    // }\n    this.props.setFocus(this.props.index);\n  }\n\n  rowMouseUp(evt: any) {\n    // this.setState({mouseIsDown: false})\n    this.checkClearRange(evt);\n  }\n\n  checkClearRange(evt: any) {\n    const tgt = evt.target;\n    if (\n      tgt.classList.contains(\"token\") ||\n      tgt.classList.contains(\"label-button\")\n    ) {\n      // do nothing?\n    } else {\n      this.updateRange(-1, -1);\n    }\n  }\n\n  selected_keyword(i: number) {\n    var first = this.state.selected_range[0];\n    var last = this.state.selected_range[this.state.selected_range.length - 1];\n\n    if (!this.props.isActive) {\n      return \"\";\n    }\n\n    // this could happen if you are dragging backwards.\n    // then we switch them!\n    if (first > last) {\n      const tmp = last;\n      last = first;\n      first = tmp;\n    }\n\n    if (first === last && first === i) {\n      return \"highlightsingle\";\n    }\n    if (i === first) {\n      return \"highlightstart\";\n    } else if (i === last) {\n      return \"highlightend\";\n    } else if (i > first && i < last) {\n      return \"highlighted\";\n    }\n\n    return \"\";\n  }\n\n  render() {\n    return (\n      <div\n        className=\"sentence\"\n        onMouseDown={this.rowMouseDown}\n        onMouseUp={this.rowMouseUp}\n      >\n        <Badge\n          className=\"sentence-badge\"\n          key={\"badge-\" + this.props.index}\n          variant=\"light\"\n        >\n          {this.props.index}\n        </Badge>\n        {this.props.sent.map((tok, index) => (\n          <Token\n            key={index}\n            form={tok}\n            label={this.props.labels[index]}\n            labelset={this.props.labelset}\n            next_token_is_entity={\n              index === this.props.sent.length - 1\n                ? false\n                : this.props.labels[index + 1][0] === \"I\"\n            }\n            selected={this.selected_keyword(index)}\n            mousedown={() => this.tokenDown(index)}\n            mouseup={() => this.tokenUp(index)}\n            show_popover={this.showPopoverFunc(index)}\n            set_label={(label: string) =>\n              this.props.set_label(\n                label,\n                this.state.selected_range[0],\n                this.state.selected_range[1]\n              )\n            }\n          />\n        ))}\n      </div>\n    );\n  }\n}\n\ntype State = {\n  color: string;\n  words: Array<Array<string>>;\n  labels: Array<Array<string>>;\n  path: string;\n  selected_range: Array<number>;\n  mouseIsDown: boolean;\n  popover_index: number;\n  prevDoc: string;\n  nextDoc: string;\n  status: string;\n};\n\ntype SentProps = {\n  index: number;\n  sent: string[];\n  labels: string[];\n  labelset: { [key: string]: string };\n  setFocus: any;\n  isActive: boolean;\n  set_label: any;\n};\n\nexport default Sentence;\n","import React from \"react\";\nimport { cloneDeep } from \"lodash\";\n//import './Annotate.css';\nimport { Button, ButtonGroup, Row, Col, Card } from \"react-bootstrap\";\nimport Sentence from \"./Sentence\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { history } from \"../_helpers\";\nimport {\n  IoIosSave,\n  IoMdCheckmarkCircleOutline,\n  IoIosArrowForward,\n  IoIosArrowBack,\n} from \"react-icons/io\";\nimport { connect } from \"react-redux\";\nimport { RouteComponentProps } from \"react-router-dom\";\nimport { dataActions } from \"../_actions\";\n\nclass Annotate extends React.Component<MatchProps, State> {\n  constructor(props: MatchProps) {\n    super(props);\n    console.log(props);\n    this.state = {\n      activeSent: -1,\n      isSaved: true,\n    };\n  }\n\n  componentDidMount() {\n    this.loadAll(this.props.dataset, this.props.docid);\n  }\n\n  // this came from: https://stackoverflow.com/questions/29425820/elegant-way-to-find-contiguous-subarray-within-an-array-in-javascript\n  // CSA is continuous sub array\n  find_csa(arr: any, subarr: any, from_index: number) {\n    let i = from_index >>> 0,\n      sl = subarr.length,\n      l = arr.length + 1 - sl;\n\n    let inds = [];\n\n    loop: for (; i < l; i++) {\n      for (let j = 0; j < sl; j++) if (arr[i + j] !== subarr[j]) continue loop;\n      inds.push(i);\n    }\n    return inds;\n  }\n\n  setLabel(label: string, first: number, last: number, sent_index: number) {\n    this.setState({ isSaved: false });\n    console.log(\"set label: \" + label);\n\n    // then we switch them!\n    if (first > last) {\n      const tmp = last;\n      last = first;\n      first = tmp;\n    }\n\n    //TODO: make sure everything is lower case!\n\n    // get the string associated with this range\n    var word_slice = this.props.data.words[sent_index].slice(first, last + 1);\n\n    var phrase_locations: number[][] = [];\n\n    for (let j = 0; j < this.props.data.words.length; j++) {\n      var inds = this.find_csa(this.props.data.words[j], word_slice, 0);\n      inds.forEach((ind) =>\n        phrase_locations.push([j, ind, ind + word_slice.length - 1])\n      );\n    }\n\n    // I don't want to modify the state variable!\n    var newLabels = cloneDeep(this.props.data.labels);\n\n    phrase_locations.forEach((tuple) => {\n      //console.log(tuple);\n      var phrase_sent = tuple[0];\n      var phrase_start = tuple[1];\n      var phrase_end = tuple[2];\n\n      // dont' update something in the middle of an annotated entity\n      if (this.props.data.labels[phrase_sent][phrase_start][0] === \"I\") {\n        return;\n      }\n\n      for (var i = phrase_start; i <= phrase_end; i++) {\n        var pref = \"\";\n        if (label !== \"O\") {\n          if (i === phrase_start) {\n            pref = \"B-\";\n          } else {\n            pref = \"I-\";\n          }\n        } else {\n          // assumes that all spans start with B-\n          // if i+1 is I-, then set i+1 to B-\n          var next = newLabels[phrase_sent][i + 1];\n          if (next && next.startsWith(\"I-\")) {\n            // change the I- to a B-\n            newLabels[phrase_sent][i + 1] = \"B-\" + next.split(\"-\").pop();\n          }\n        }\n        newLabels[phrase_sent][i] = pref + label;\n      }\n    });\n\n    this.props.setLabels(newLabels);\n    // TODO: update labels here!\n    this.setState({ activeSent: -1 });\n  }\n\n  sendLabels() {\n    this.setState({ isSaved: true });\n    var data = {\n      docid: this.props.docid,\n      dataset: this.props.dataset,\n      sentences: this.props.data.words,\n      labels: this.props.data.labels,\n      path: this.props.data.path,\n    };\n    this.props.saveDocument(data);\n    this.props.data.isAnnotated = true;\n  }\n\n  setFocus(sent_index: number) {\n    console.log(`sentence ${sent_index} wants focus now!`);\n    this.setState({ activeSent: sent_index });\n  }\n\n  loadAll(dataset: string, docId: string) {\n    this.props.loadDocument(dataset, docId);\n    this.props.loadStatus(dataset, docId);\n  }\n\n  buttonPush(dataset: string, newDoc: string) {\n    // this is a very important line\n    // don't save docs that have not been touched!\n    // if (!this.state.isSaved) {\n    //   this.sendLabels();\n    // }\n\n    const labels = this.props.data.labels;\n    let hasLabel = false;\n    for (let i = 0; i < labels.length; i++) {\n      const sent = labels[i];\n      for (let j = 0; j < sent.length; j++) {\n        const label = sent[j];\n        if (label !== \"O\") {\n          hasLabel = true;\n          break;\n        }\n      }\n    }\n\n    let confirmed = true;\n    if (hasLabel && !this.state.isSaved) {\n      confirmed = window.confirm(\n        \"There are unsaved labels! Press OK to discard labels, and cancel to stay on this page.\"\n      );\n    }\n\n    if (confirmed) {\n      var url = `/dataset/${dataset}/${newDoc}`;\n      this.loadAll(dataset, newDoc);\n      history.push(url);\n    }\n  }\n\n  render() {\n    const { data } = this.props;\n\n    // logic for updating the range.\n    // if mousedown on a token, that becomes start of the range.\n    // if mouse enters a token AND mouse down AND range is consecutive: add to range\n    // if mousedown OUTSIDE a token, then clear the range.\n    // if mouseup on a token, that becomes end of the range.\n    return (\n      <Row className=\"document\">\n        <Col md={9}>\n          <Card>\n            <Card.Body>\n              {data.words &&\n                data.labelset &&\n                data.words.map((sent: string[], sent_index: number) => (\n                  <Sentence\n                    key={sent_index}\n                    index={sent_index}\n                    sent={sent}\n                    labels={data.labels[sent_index]}\n                    labelset={data.labelset}\n                    setFocus={(ind: number) => this.setFocus(ind)}\n                    isActive={sent_index === this.state.activeSent}\n                    set_label={(lab: string, first: number, last: number) =>\n                      this.setLabel(lab, first, last, sent_index)\n                    }\n                  />\n                ))}\n            </Card.Body>\n          </Card>\n        </Col>\n        <Col md={3}>\n          {this.state.isSaved && data.isAnnotated && (\n            <Button variant=\"outline-success\">\n              <>\n                <IoMdCheckmarkCircleOutline /> Saved\n              </>\n            </Button>\n          )}\n          {(!this.state.isSaved || !data.isAnnotated) && (\n            <Button variant=\"outline-danger\" onClick={() => this.sendLabels()}>\n              <>\n                <IoIosSave /> Save\n              </>\n            </Button>\n          )}\n          <p></p>\n          {data.status && <p>{data.status}</p>}\n          <p></p>\n          <ButtonGroup>\n            {data.prevDoc && (\n              <Button\n                variant=\"outline-primary\"\n                onClick={() =>\n                  this.buttonPush(this.props.dataset, data.prevDoc)\n                }\n              >\n                <IoIosArrowBack /> Previous\n              </Button>\n            )}\n            {data.nextDoc && (\n              <Button\n                variant=\"outline-primary\"\n                onClick={() =>\n                  this.buttonPush(this.props.dataset, this.props.data.nextDoc)\n                }\n              >\n                Next <IoIosArrowForward />\n              </Button>\n            )}\n          </ButtonGroup>\n          <p></p>\n          <ButtonGroup>\n            <Link to={`${this.props.uplink}`}>\n              <Button variant=\"outline-secondary\">Back to all docs...</Button>\n            </Link>\n          </ButtonGroup>\n        </Col>\n      </Row>\n    );\n  }\n}\n\n// TODO: fix the any!!\ninterface MatchProps extends RouteComponentProps<MatchParams> {\n  data: any;\n  dataset: string;\n  docid: string;\n  uplink: string;\n  setLabels: any;\n  saveDocument: any;\n  loadDocument: any;\n  loadStatus: any;\n}\n\ninterface MatchParams {}\n\n// TODO: move this state into the main state?\ntype State = {\n  isSaved: boolean;\n  activeSent: number;\n};\n\n// TODO: fix this any...\nfunction mapState(state: any) {\n  const { data } = state;\n  return { data };\n}\n\nconst actionCreators = {\n  saveDocument: dataActions.saveDocument,\n  loadDocument: dataActions.loadDocument,\n  loadStatus: dataActions.loadStatus,\n  setLabels: dataActions.setLabels,\n};\n\nconst connectedAnnotate = connect(\n  mapState,\n  actionCreators\n)(withRouter(Annotate));\nexport { connectedAnnotate as Annotate };\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Annotate } from \"../_components/Annotate\";\nimport { MainPanel } from \"../_components\";\nimport { RouteComponentProps } from \"react-router-dom\";\nimport { dataActions } from \"../_actions\";\n\nclass DocumentPage extends React.Component<MatchProps> {\n  componentDidMount() {\n    const { match } = this.props;\n    console.log(\"this doc is:\" + match.params.id);\n    this.props.getDocuments(match.params.id);\n  }\n\n  render() {\n    const { match } = this.props;\n\n    return (\n      <MainPanel>\n        <div className=\"col-md-12\">\n          <Annotate\n            dataset={match.params.id}\n            docid={match.params.docid}\n            uplink={`/dataset/${match.params.id}`}\n          />\n        </div>\n      </MainPanel>\n    );\n  }\n}\n\n// TODO: fix the any!!\ninterface MatchProps extends RouteComponentProps<MatchParams> {\n  getDocuments: any;\n  data: any;\n}\n\ninterface MatchParams {\n  id: string;\n  docid: string;\n}\n\n// TODO: make this STATE\nfunction mapState(state: any) {\n  const { authentication, data } = state;\n  const { user } = authentication;\n  return { user, data };\n}\n\nconst actionCreators = {\n  getDocuments: dataActions.getDocuments,\n};\n\nconst connectedDocumentPage = connect(mapState, actionCreators)(DocumentPage);\nexport { connectedDocumentPage as DocumentPage };\n","import React from \"react\";\nimport { Link, RouteComponentProps } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { MainPanel } from \"../_components\";\nimport { dataActions } from \"../_actions\";\nimport { ListGroup } from \"react-bootstrap\";\n\n// this page shows a list of datasets. If you click on a dataset,\n// that takes you to a DatasetPage.\nclass HomePage extends React.Component<MatchProps> {\n  componentDidMount() {\n    this.props.getDatasets();\n  }\n\n  render() {\n    const { user, data } = this.props;\n    return (\n      <MainPanel>\n        <div className=\"col-md-12\">\n          <h1>Hi {user.username}!</h1>\n          <ListGroup>\n            {data.items &&\n              data.items.datasetIDs &&\n              data.items.datasetIDs.map((id: string, index: number) => (\n                <ListGroup.Item key={index}>\n                  <Link to={`/dataset/${id}`}>{id}</Link>\n                </ListGroup.Item>\n              ))}\n          </ListGroup>\n        </div>\n\n        {/* <div className=\"col-md-6 col-md-offset-3\">\n\n          <ul>\n            {data.items &&\n              data.items.datasetIDs &&\n              data.items.datasetIDs.map((id: string, index: number) => (\n                <li key={index}>\n                  \n                </li>\n              ))}\n          </ul>\n        </div> */}\n      </MainPanel>\n    );\n  }\n}\n\n// TODO: fix the any!!\ninterface MatchProps extends RouteComponentProps<MatchParams> {\n  getDocuments: any;\n  data: any;\n  user: any;\n  getDatasets: any;\n}\n\ninterface MatchParams {\n  id: string;\n  docid: string;\n}\n\n// TODO: fix the any!\nfunction mapState(state: any) {\n  const { authentication, data } = state;\n  const { user } = authentication;\n  return { user, data };\n}\n\nconst actionCreators = {\n  getDatasets: dataActions.getDatasets,\n};\n\nconst connectedDatasetPage = connect(mapState, actionCreators)(HomePage);\nexport { connectedDatasetPage as HomePage };\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { MainPanel, Input } from \"../_components\";\nimport { userActions } from \"../_actions\";\nimport { State } from \"../_utils/types\";\n\nclass LoginPage extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    // reset login status\n    // what???\n    this.props.logout();\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(e: any) {\n    e.preventDefault();\n\n    const { formState, login } = this.props;\n    login(formState.username, formState.password);\n  }\n\n  render() {\n    return (\n      <MainPanel hideLoginButton={true}>\n        <div className=\"col-md-6 col-md-offset-3\">\n          <h2>Login</h2>\n\n          <form name=\"form\" onSubmit={this.handleSubmit}>\n            <Input\n              name=\"username\"\n              label=\"Username\"\n              type=\"text\"\n              model=\"username\"\n            ></Input>\n            <Input\n              name=\"password\"\n              label=\"Password\"\n              type=\"text\"\n              model=\"password\"\n            ></Input>\n            <div className=\"form-group\">\n              <button className=\"btn btn-primary\">Login</button>\n              <Link to=\"/register\" className=\"btn btn-link\">\n                Register\n              </Link>\n            </div>\n          </form>\n        </div>\n      </MainPanel>\n    );\n  }\n}\n\ntype Props = {\n  logout: any;\n  login: any;\n  formState: {\n    [key: string]: number | string;\n  };\n};\n\nfunction mapState(state: State) {\n  const { loggingIn } = state.authentication;\n  const { formState } = state.util;\n  return { loggingIn, formState };\n}\n\nconst actionCreators = {\n  login: userActions.login,\n  logout: userActions.logout,\n};\n\nconst connectedLoginPage = connect(mapState, actionCreators)(LoginPage);\nexport { connectedLoginPage as LoginPage };\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\n\nimport { userActions } from \"../_actions\";\n\nclass RegisterPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      user: {\n        firstName: \"\",\n        lastName: \"\",\n        username: \"\",\n        password: \"\",\n      },\n      submitted: false,\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    const { name, value } = event.target;\n    const { user } = this.state;\n    this.setState({\n      user: {\n        ...user,\n        [name]: value,\n      },\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n\n    this.setState({ submitted: true });\n    const { user } = this.state;\n    if (user.firstName && user.lastName && user.username && user.password) {\n      this.props.register(user);\n    }\n  }\n\n  render() {\n    const { user, submitted } = this.state;\n    return (\n      <div className=\"col-md-6 col-md-offset-3\">\n        <h2>Register</h2>\n        <form name=\"form\" onSubmit={this.handleSubmit}>\n          <div\n            className={\n              \"form-group\" + (submitted && !user.firstName ? \" has-error\" : \"\")\n            }\n          >\n            <label htmlFor=\"firstName\">First Name</label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              name=\"firstName\"\n              value={user.firstName}\n              onChange={this.handleChange}\n            />\n            {submitted && !user.firstName && (\n              <div className=\"help-block\">First Name is required</div>\n            )}\n          </div>\n          <div\n            className={\n              \"form-group\" + (submitted && !user.lastName ? \" has-error\" : \"\")\n            }\n          >\n            <label htmlFor=\"lastName\">Last Name</label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              name=\"lastName\"\n              value={user.lastName}\n              onChange={this.handleChange}\n            />\n            {submitted && !user.lastName && (\n              <div className=\"help-block\">Last Name is required</div>\n            )}\n          </div>\n          <div\n            className={\n              \"form-group\" + (submitted && !user.username ? \" has-error\" : \"\")\n            }\n          >\n            <label htmlFor=\"username\">Username</label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              name=\"username\"\n              value={user.username}\n              onChange={this.handleChange}\n            />\n            {submitted && !user.username && (\n              <div className=\"help-block\">Username is required</div>\n            )}\n          </div>\n          <div\n            className={\n              \"form-group\" + (submitted && !user.password ? \" has-error\" : \"\")\n            }\n          >\n            <label htmlFor=\"password\">Password</label>\n            <input\n              type=\"password\"\n              className=\"form-control\"\n              name=\"password\"\n              value={user.password}\n              onChange={this.handleChange}\n            />\n            {submitted && !user.password && (\n              <div className=\"help-block\">Password is required</div>\n            )}\n          </div>\n          <div className=\"form-group\">\n            <button className=\"btn btn-primary\">Register</button>\n            <Link to=\"/login\" className=\"btn btn-link\">\n              Cancel\n            </Link>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nfunction mapState(state) {\n  const { registering } = state.registration;\n  return { registering };\n}\n\nconst actionCreators = {\n  register: userActions.register,\n};\n\nconst connectedRegisterPage = connect(mapState, actionCreators)(RegisterPage);\nexport { connectedRegisterPage as RegisterPage };\n","import React from \"react\";\nimport { Router, Route, Switch, Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\n\nimport { history } from \"../_helpers\";\nimport { alertActions } from \"../_actions\";\nimport { PrivateRoute } from \"../_components\";\nimport {\n  LoginPage,\n  HomePage,\n  DatasetPage,\n  DocumentPage,\n  RegisterPage,\n} from \"../_pages\";\nimport \"./App.css\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    history.listen((location, action) => {\n      // clear alert on location change\n      this.props.clearAlerts();\n    });\n  }\n\n  render() {\n    const { alert } = this.props;\n    return (\n      <Router history={history}>\n        {alert.message && (\n          <div className={`alert ${alert.type}`}>{alert.message}</div>\n        )}\n\n        <Switch>\n          <PrivateRoute exact path=\"/\" component={HomePage} />\n          <PrivateRoute exact path=\"/dataset/:id\" component={DatasetPage} />\n          <PrivateRoute\n            exact\n            path=\"/dataset/:id/:docid\"\n            component={DocumentPage}\n          />\n          <Route path=\"/login\" component={LoginPage} />\n          <Route path=\"/register\" component={RegisterPage} />\n          <Redirect from=\"*\" to=\"/\" />\n        </Switch>\n      </Router>\n    );\n  }\n}\n\nfunction mapState(state) {\n  const { alert } = state;\n  return { alert };\n}\n\nconst actionCreators = {\n  clearAlerts: alertActions.clear,\n};\n\nconst connectedApp = connect(mapState, actionCreators)(App);\nexport { connectedApp as App };\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport \"./index.css\";\nimport { store } from \"./_helpers\";\nimport { App } from \"./App\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\n// setup fake backend\nimport { configureFakeBackend } from './_helpers';\nconfigureFakeBackend();\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}