(this["webpackJsonptalen-react"]=this["webpackJsonptalen-react"]||[]).push([[0],{67:function(e,t,a){e.exports=a(83)},76:function(e,t,a){},81:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(19),o=a.n(r),c=a(12),l=(a(76),a(16)),i=Object(l.a)({basename:"https://mayhewsw.github.io/talen-react"}),u=a(24),p=a(53),m=a(54),h=a(55),d=a(14),O={loggedIn:!1,user:JSON.parse(localStorage.getItem("user")||"{}"),loggingIn:!1},f={loggedIn:!1,loggingIn:!1,user:{username:"",access_token:""}};var g={items:[],prevDoc:"",nextDoc:"",status:"",words:[[]],labels:[[]],labelset:[],path:"",isAnnotated:!1};var b={type:"",message:""};var v={formState:{username:"",password:""}};var E=Object(u.combineReducers)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATA_LOGIN_REQUEST":return Object(d.a)({},e,{loggingIn:!0,user:t.user});case"DATA_LOGIN_SUCCESS":return{loggingIn:!1,loggedIn:!0,user:t.user};case"DATA_LOGIN_FAILURE":case"DATA_LOGOUT":return f;default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATA_REGISTER_REQUEST":return{registering:!0};case"DATA_REGISTER_SUCCESS":case"DATA_REGISTER_FAILURE":return{};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type,e},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GETDATASETS_SUCCESS":case"GETDOCS_SUCCESS":return Object(d.a)({},e,{items:t.data});case"LOADSTATUS":var a=t.data.documentIDs.indexOf(t.docId),n=t.data.documentIDs[a-1],s=t.data.documentIDs[a+1];return Object(d.a)({},e,{prevDoc:n,nextDoc:s,status:"On document ".concat(a+1," out of ").concat(t.data.documentIDs.length,".")});case"LOADDOC_SUCCESS":return Object(d.a)({},e,{words:t.data.sentences,labels:t.data.labels,labelset:t.data.labelset,path:t.data.path,isAnnotated:t.data.isAnnotated});case"SETLABELS":return Object(d.a)({},e,{labels:t.newLabels});default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALERT_SUCCESS":return{type:"alert-success",message:t.message};case"ALERT_ERROR":return{type:"alert-danger",message:t.message};case"ALERT_CLEAR":return{type:"",message:""};default:return e}},util:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_FORM":return{formState:Object(d.a)({},e.formState,{},t.newState)};default:return e}}}),y=Object(h.createLogger)(),S=Object(u.createStore)(E,Object(p.composeWithDevTools)(Object(u.applyMiddleware)(m.a,y)));function D(){var e=JSON.parse(localStorage.getItem("user")||"");return e&&e.access_token?{Authorization:"JWT "+e.access_token}:{}}var w={dataset1:{doc1:{sentences:["Johnny Depp stayed at the Paris Hilton , reports CNN .".split(" "),"New York City is in New York , which is in the United States .".split(" "),"Other states in the United States include Montana , Indiana , and New Jersey .".split(" "),"England draw dull Denmark game .".split(" ")],labels:["OOOOOOOOOOO".split(""),"OOOOOOOOOOOOOOO".split(""),"OOOOOOOOOOOOOOO".split(""),"OOOOOO".split("")]},doc2:{sentences:["Johnny Depp stayed at the Paris Hilton , reports CNN .".split(" "),"New York City is in New York , which is in the United States .".split(" "),"England draw dull Denmark game .".split(" ")],labels:["OOOOOOOOOOO".split(""),"OOOOOOOOOOOOOOO".split(""),"OOOOOO".split("")]}},news_set:{news1:{sentences:["Johnny Depp stayed at the Paris Hilton , reports CNN .".split(" "),"New York City is in New York , which is in the United States .".split(" "),"England draw dull Denmark game .".split(" ")],labels:["OOOOOOOOOOO".split(""),"OOOOOOOOOOOOOOO".split(""),"OOOOOO".split("")]},news2:{sentences:["Johnny Depp stayed at the Paris Hilton , reports CNN .".split(" "),"New York City is in New York , which is in the United States .".split(" "),"England draw dull Denmark game .".split(" ")],labels:["OOOOOOOOOOO".split(""),"OOOOOOOOOOOOOOO".split(""),"OOOOOO".split("")]}}};console.log(w);var j=a(6),k=a(7),N=a(9),C=a(8),_=a(10),T=a(11),A={success:function(e){return{type:"ALERT_SUCCESS",message:e}},error:function(e){return{type:"ALERT_ERROR",message:e}},clear:function(){return{type:"ALERT_CLEAR"}}};var I={login:function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})};return fetch("http://localhost:5000/users/authenticate",a).then(R).then((function(e){return console.log(e),localStorage.setItem("user",JSON.stringify(e)),e}))},logout:L,register:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("http://localhost:5000/users/register",t).then(R)},getAll:function(){var e={method:"GET",headers:D()};return fetch("http://localhost:5000/users",e).then(R)},getById:function(e){var t={method:"GET",headers:D()};return fetch("http://localhost:5000/users/".concat(e),t).then(R)},update:function(e){var t={method:"PUT",headers:Object(d.a)({},D(),{"Content-Type":"application/json"}),body:JSON.stringify(e)};return fetch("http://localhost:5000/users/".concat(e.id),t).then(R)},delete:function(e){var t={method:"DELETE",headers:D()};return fetch("http://localhost:5000/users/".concat(e),t).then(R)}};function L(){localStorage.removeItem("user")}function R(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(!e.ok){401===e.status&&L();var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}))}var x={getDatasets:function(){var e={method:"GET",headers:D()};return fetch("http://localhost:5000/datasetlist",e).then(U).then((function(e){return e}))},saveDocument:function(e){console.log("in service"),console.log(e);var t={headers:Object(d.a)({},D(),{"Content-Type":"application/json"}),body:JSON.stringify(e),method:"POST"};return fetch("http://localhost:5000/savedoc",t).then(U).then((function(e){return e}))},loadDocument:function(e,t){var a={headers:D(),method:"GET"};return fetch("http://localhost:5000/loaddoc?docid=".concat(t,"&dataset=").concat(e),a).then(U).then((function(e){return e}))},getDocuments:function(e){var t={method:"GET",headers:D()};return fetch("http://localhost:5000/loaddataset?dataset=".concat(e),t).then(U).then((function(e){return e}))}};function U(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(!e.ok){console.log("there is error!");var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}))}var G={login:function(e,t){return function(a){a({type:"DATA_LOGIN_REQUEST",user:{username:e,access_token:"?"}}),I.login(e,t).then((function(e){a(function(e){return{type:"DATA_LOGIN_SUCCESS",user:e}}(e)),console.log("https://mayhewsw.github.io/talen-react/"),i.push("https://mayhewsw.github.io/talen-react/")}),(function(e){a(function(e){return{type:"DATA_LOGIN_FAILURE",error:e}}(e.toString())),a(A.error(e.toString()))}))}},logout:function(){return function(e){I.logout(),e({type:"DATA_LOGOUT"})}},register:function(e){return function(t){t(function(e){return{type:"DATA_REGISTER_REQUEST",user:e}}(e)),I.register(e).then((function(e){t(function(e){return{type:"DATA_REGISTER_SUCCESS",user:e}}(e)),i.push("https://mayhewsw.github.io/talen-react/login"),t(A.success("Registration successful"))}),(function(e){t(function(e){return{type:"DATA_REGISTER_FAILURE",error:e}}(e.toString())),t(A.error(e.toString()))}))}}};var P={getDatasets:function(){return function(e){x.getDatasets().then((function(t){e(function(e){return{type:"GETDATASETS_SUCCESS",data:e}}(t))}),(function(t){F(e,t)}))}},saveDocument:function(e){return function(t){x.saveDocument(e).then((function(e){console.log(e),t(function(e){return{type:"SAVEDOC_SUCCESS",data:e}}(e))}),(function(e){console.log(e),F(t,e)}))}},loadDocument:function(e,t){return function(a){x.loadDocument(e,t).then((function(e){console.log(e),a(function(e){return{type:"LOADDOC_SUCCESS",data:e}}(e))}),(function(e){F(a,e)}))}},getDocuments:function(e){return function(t){x.getDocuments(e).then((function(e){t(function(e){return{type:"GETDOCS_SUCCESS",data:e}}(e))}),(function(e){F(t,e)}))}},loadStatus:function(e,t){return function(a){x.getDocuments(e).then((function(e){a(function(e){return{type:"LOADSTATUS",data:e,docId:t}}(e))}),(function(e){F(a,e)}))}},setLabels:function(e){return{type:"SETLABELS",newLabels:e}}};function F(e,t){"UNAUTHORIZED"===t?(e(A.error("Logged out! Redirecting to login page...")),setTimeout((function(){i.push("https://mayhewsw.github.io/talen-react/login")}),500)):e(A.error(t.toString()))}var M=function(e){return console.log("inside login/changeForm"),{type:"CHANGE_FORM",newState:e}},J=a(56),B=function(e){var t=e.component,a=Object(J.a)(e,["component"]);return s.a.createElement(T.b,Object.assign({},a,{render:function(e){return localStorage.getItem("user")?s.a.createElement(t,e):s.a.createElement(T.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},H=a(93),Y=a(88),W=a(15),q=function(e){function t(){return Object(j.a)(this,t),Object(N.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(H.a,{bg:"light",expand:"lg",fixed:"top"},s.a.createElement(Y.a,null,s.a.createElement(H.a.Brand,{href:""},"TALEN"),s.a.createElement(H.a.Toggle,{"aria-controls":"basic-navbar-nav"}),s.a.createElement(H.a.Collapse,{id:"basic-navbar-nav"},s.a.createElement(H.a.Collapse,{className:"mr-auto"},s.a.createElement(H.a.Text,{className:"px-2"},s.a.createElement(W.a,{to:"/"},"Home")),s.a.createElement(H.a.Text,{className:"px-2"},s.a.createElement(W.a,{to:"/dataset/".concat(this.props.match.params.id)},this.props.match.params.id)),s.a.createElement(H.a.Text,{className:"px-2"},this.props.match.params.docid)),this.props.hideLoginButton?null:s.a.createElement(s.a.Fragment,null,s.a.createElement(H.a.Collapse,{className:"justify-content-end"},this.props.userName?s.a.createElement(s.a.Fragment,null,s.a.createElement(H.a.Text,{className:"px-3"},"Signed in as: ".concat(this.props.userName)),s.a.createElement(W.a,{to:"/login"},"Logout")):s.a.createElement(H.a.Text,null,s.a.createElement(W.a,{to:"/login"},"Login"))))))),s.a.createElement(Y.a,null,this.props.children))}}]),t}(s.a.Component),Q=Object(T.g)(Object(c.b)((function(e){return{userName:e.authentication.user.username}}),(function(e){return{}}))(q)),V=a(29),z=a(20),K=a(92),Z=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(N.a)(this,Object(C.a)(t).call(this,e))).changeInput=a.changeInput.bind(Object(z.a)(a)),a}return Object(_.a)(t,e),Object(k.a)(t,[{key:"changeInput",value:function(e){var t=e.target.value,a=e.target.name;this.props.handleChange(Object(V.a)({},a,t))}},{key:"render",value:function(){var e=this.props,t=e.label,a=e.type,n=e.name,r=e.model,o=e.formState[r];return s.a.createElement(K.a.Group,null,s.a.createElement(K.a.Label,null,t),s.a.createElement(K.a.Control,{type:a,name:n,defaultValue:o,onChange:this.changeInput}))}}]),t}(s.a.Component),X=Object(c.b)((function(e){return{formState:e.util.formState}}),(function(e){return{handleChange:function(t){return e(M(t))}}}))(Z),$=a(94),ee=a(89),te=function(e){function t(){return Object(j.a)(this,t),Object(N.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match;console.log("this doc is:"+e.params.id),this.props.getDocuments(e.params.id)}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.data;return console.log(t.params.id),console.log(a),s.a.createElement(Q,null,s.a.createElement("div",{className:"col-md-12"},a.items&&a.items.documentIDs&&a.items.annotatedDocumentIDs&&s.a.createElement("p",null,"There are ",a.items.documentIDs.length," documents. Of these,"," ",a.items.annotatedDocumentIDs.length," have been annotated (marked in green)."),s.a.createElement($.a,null,a.items&&a.items.documentIDs&&a.items.documentIDs.map((function(e,n){return s.a.createElement($.a.Item,{key:n,variant:a.items.annotatedDocumentIDs.indexOf(e)>-1?"success":void 0},s.a.createElement(ee.a,{className:"sentence-badge",key:"badge-"+n,variant:a.items.annotatedDocumentIDs.indexOf(e)>-1?"success":"light"},n+1),s.a.createElement(W.a,{to:{pathname:"/dataset/".concat(t.params.id,"/").concat(e)}},e))})))))}}]),t}(s.a.Component);var ae={getDocuments:P.getDocuments},ne=Object(c.b)((function(e){var t=e.authentication,a=e.data;return{user:t.user,data:a}}),ae)(te),se=a(61),re=a(90),oe=a(58),ce=a(96),le=a(98),ie=a(91),ue=a(95),pe=a(97),me=function(e){function t(){return Object(j.a)(this,t),Object(N.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement(le.a,{onClick:function(){return e.props.onClick()},bsPrefix:"custom-btn",className:["label-button",this.props.label].join(" "),style:{background:this.props.color}},this.props.label)}}]),t}(s.a.Component),he=function(e){function t(){var e,a;Object(j.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(N.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).myRef=s.a.createRef(),a}return Object(_.a)(t,e),Object(k.a)(t,[{key:"handleOver",value:function(e){1===e.buttons&&this.props.mouseup()}},{key:"componentDidMount",value:function(){document.addEventListener("contextmenu",this._handleContextMenu)}},{key:"_handleContextMenu",value:function(e){e.preventDefault()}},{key:"handleDown",value:function(e){2===e.button&&console.log("right click down"),e.target.classList.contains("token")&&this.props.mousedown()}},{key:"handleUp",value:function(e){if(2===e.button)return console.log("right click up"),void this.props.set_label("O");this.props.mouseup()}},{key:"render",value:function(){var e=this,t=this.props.label.split("-").pop()||"O",a=Object.keys(this.props.labelset).map((function(t){return s.a.createElement(me,{key:t,label:t,color:e.props.labelset[t],onClick:function(){return e.props.set_label(t)}})})),n=["spacer"],r={background:"transparent"};"O"!==this.props.label&&this.props.next_token_is_entity&&(r.background=this.props.labelset[t],n.push("label")),"highlightstart"!==this.props.selected&&"highlighted"!==this.props.selected||n.push("highlighted");var o=["token","nocopy",this.props.selected,t,"O"===this.props.label?null:"label"];return this.props.next_token_is_entity||"B"!==this.props.label[0]?"B"===this.props.label[0]?o.push("labelstart"):"O"===this.props.label||this.props.next_token_is_entity||o.push("labelend"):o.push("labelsingle"),s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:o.join(" "),onMouseDown:function(t){return e.handleDown(t)},onMouseUp:function(t){return e.handleUp(t)},onMouseOver:function(t){return e.handleOver(t)},style:{background:this.props.labelset[t]},ref:this.myRef},this.props.form),s.a.createElement("span",{className:n.join(" "),style:r}," "),s.a.createElement(ue.a,{show:this.props.show_popover,target:this.myRef.current,placement:"bottom",transition:!1},s.a.createElement(pe.a,{id:"popover-container"},s.a.createElement(pe.a.Content,null,s.a.createElement("div",{className:"label-box"},a)))))}}]),t}(s.a.Component),de=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(N.a)(this,Object(C.a)(t).call(this,e))).state={color:"white",words:[[]],labels:[[]],path:"",mouseIsDown:!1,selected_range:[-1,-1],popover_index:-1,prevDoc:"",nextDoc:"",status:""},a.rowMouseDown=a.rowMouseDown.bind(Object(z.a)(a)),a.rowMouseUp=a.rowMouseUp.bind(Object(z.a)(a)),a}return Object(_.a)(t,e),Object(k.a)(t,[{key:"showPopoverFunc",value:function(e){return this.props.isActive&&!this.state.mouseIsDown&&e===this.state.selected_range[1]}},{key:"updateRange",value:function(e,t){this.setState({selected_range:[e,t]})}},{key:"tokenUp",value:function(e){this.updateRange(this.state.selected_range[0],e)}},{key:"tokenDown",value:function(e){this.updateRange(e,e)}},{key:"rowMouseDown",value:function(e){this.props.setFocus(this.props.index)}},{key:"rowMouseUp",value:function(e){this.checkClearRange(e)}},{key:"checkClearRange",value:function(e){var t=e.target;t.classList.contains("token")||t.classList.contains("label-button")||this.updateRange(-1,-1)}},{key:"selected_keyword",value:function(e){var t=this.state.selected_range[0],a=this.state.selected_range[this.state.selected_range.length-1];if(!this.props.isActive)return"";if(t>a){var n=a;a=t,t=n}return t===a&&t===e?"highlightsingle":e===t?"highlightstart":e===a?"highlightend":e>t&&e<a?"highlighted":""}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"sentence",onMouseDown:this.rowMouseDown,onMouseUp:this.rowMouseUp},s.a.createElement(ee.a,{className:"sentence-badge",key:"badge-"+this.props.index,variant:"light"},this.props.index),this.props.sent.map((function(t,a){return s.a.createElement(he,{key:a,form:t,label:e.props.labels[a],labelset:e.props.labelset,next_token_is_entity:a!==e.props.sent.length-1&&"I"===e.props.labels[a+1][0],selected:e.selected_keyword(a),mousedown:function(){return e.tokenDown(a)},mouseup:function(){return e.tokenUp(a)},show_popover:e.showPopoverFunc(a),set_label:function(t){return e.props.set_label(t,e.state.selected_range[0],e.state.selected_range[1])}})})))}}]),t}(s.a.Component),Oe=a(34),fe=function(e){function t(e){var a;return Object(j.a)(this,t),a=Object(N.a)(this,Object(C.a)(t).call(this,e)),console.log(e),a.state={activeSent:-1,isSaved:!0},a}return Object(_.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.loadAll(this.props.dataset,this.props.docid)}},{key:"find_csa",value:function(e,t,a){var n=a>>>0,s=t.length,r=e.length+1-s,o=[];e:for(;n<r;n++){for(var c=0;c<s;c++)if(e[n+c]!==t[c])continue e;o.push(n)}return o}},{key:"setLabel",value:function(e,t,a,n){var s=this;if(this.setState({isSaved:!1}),console.log("set label: "+e),t>a){var r=a;a=t,t=r}for(var o=this.props.data.words[n].slice(t,a+1),c=[],l=function(e){s.find_csa(s.props.data.words[e],o,0).forEach((function(t){return c.push([e,t,t+o.length-1])}))},i=0;i<this.props.data.words.length;i++){l(i)}var u=Object(se.cloneDeep)(this.props.data.labels);c.forEach((function(t){var a=t[0],n=t[1],r=t[2];if("I"!==s.props.data.labels[a][n][0])for(var o=n;o<=r;o++){var c="";if("O"!==e)c=o===n?"B-":"I-";else{var l=u[a][o+1];l&&l.startsWith("I-")&&(u[a][o+1]="B-"+l.split("-").pop())}u[a][o]=c+e}})),this.props.setLabels(u),this.setState({activeSent:-1})}},{key:"sendLabels",value:function(){this.setState({isSaved:!0});var e={docid:this.props.docid,dataset:this.props.dataset,sentences:this.props.data.words,labels:this.props.data.labels,path:this.props.data.path};this.props.saveDocument(e),this.props.data.isAnnotated=!0}},{key:"setFocus",value:function(e){console.log("sentence ".concat(e," wants focus now!")),this.setState({activeSent:e})}},{key:"loadAll",value:function(e,t){this.props.loadDocument(e,t),this.props.loadStatus(e,t)}},{key:"buttonPush",value:function(e,t){for(var a=this.props.data.labels,n=!1,s=0;s<a.length;s++)for(var r=a[s],o=0;o<r.length;o++){if("O"!==r[o]){n=!0;break}}var c=!0;if(n&&!this.state.isSaved&&(c=window.confirm("There are unsaved labels! Press OK to discard labels, and cancel to stay on this page.")),c){var l="/dataset/".concat(e,"/").concat(t);this.loadAll(e,t),i.push("https://mayhewsw.github.io/talen-react"+l)}}},{key:"render",value:function(){var e=this,t=this.props.data;return s.a.createElement(re.a,{className:"document"},s.a.createElement(oe.a,{md:9},s.a.createElement(ce.a,null,s.a.createElement(ce.a.Body,null,t.words&&t.labelset&&t.words.map((function(a,n){return s.a.createElement(de,{key:n,index:n,sent:a,labels:t.labels[n],labelset:t.labelset,setFocus:function(t){return e.setFocus(t)},isActive:n===e.state.activeSent,set_label:function(t,a,s){return e.setLabel(t,a,s,n)}})}))))),s.a.createElement(oe.a,{md:3},this.state.isSaved&&t.isAnnotated&&s.a.createElement(le.a,{variant:"outline-success"},s.a.createElement(s.a.Fragment,null,s.a.createElement(Oe.d,null)," Saved")),(!this.state.isSaved||!t.isAnnotated)&&s.a.createElement(le.a,{variant:"outline-danger",onClick:function(){return e.sendLabels()}},s.a.createElement(s.a.Fragment,null,s.a.createElement(Oe.c,null)," Save")),s.a.createElement("p",null),t.status&&s.a.createElement("p",null,t.status),s.a.createElement("p",null),s.a.createElement(ie.a,null,t.prevDoc&&s.a.createElement(le.a,{variant:"outline-primary",onClick:function(){return e.buttonPush(e.props.dataset,t.prevDoc)}},s.a.createElement(Oe.a,null)," Previous"),t.nextDoc&&s.a.createElement(le.a,{variant:"outline-primary",onClick:function(){return e.buttonPush(e.props.dataset,e.props.data.nextDoc)}},"Next ",s.a.createElement(Oe.b,null))),s.a.createElement("p",null),s.a.createElement(ie.a,null,s.a.createElement(W.a,{to:"".concat(this.props.uplink)},s.a.createElement(le.a,{variant:"outline-secondary"},"Back to all docs...")))))}}]),t}(s.a.Component);var ge={saveDocument:P.saveDocument,loadDocument:P.loadDocument,loadStatus:P.loadStatus,setLabels:P.setLabels},be=Object(c.b)((function(e){return{data:e.data}}),ge)(Object(T.g)(fe)),ve=function(e){function t(){return Object(j.a)(this,t),Object(N.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match;console.log("this doc is:"+e.params.id),this.props.getDocuments(e.params.id)}},{key:"render",value:function(){var e=this.props.match;return s.a.createElement(Q,null,s.a.createElement("div",{className:"col-md-12"},s.a.createElement(be,{dataset:e.params.id,docid:e.params.docid,uplink:"/dataset/".concat(e.params.id)})))}}]),t}(s.a.Component);var Ee={getDocuments:P.getDocuments},ye=Object(c.b)((function(e){var t=e.authentication,a=e.data;return{user:t.user,data:a}}),Ee)(ve),Se=function(e){function t(){return Object(j.a)(this,t),Object(N.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.props.getDatasets()}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.data;return s.a.createElement(Q,null,s.a.createElement("div",{className:"col-md-12"},s.a.createElement("h1",null,"Hi ",t.username,"!"),s.a.createElement($.a,null,a.items&&a.items.datasetIDs&&a.items.datasetIDs.map((function(e,t){return s.a.createElement($.a.Item,{key:t},s.a.createElement(W.a,{to:"/dataset/".concat(e)},e))})))))}}]),t}(s.a.Component);var De={getDatasets:P.getDatasets},we=Object(c.b)((function(e){var t=e.authentication,a=e.data;return{user:t.user,data:a}}),De)(Se),je=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(N.a)(this,Object(C.a)(t).call(this,e))).props.logout(),a.handleSubmit=a.handleSubmit.bind(Object(z.a)(a)),a}return Object(_.a)(t,e),Object(k.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props,a=t.formState;(0,t.login)(a.username,a.password)}},{key:"render",value:function(){return s.a.createElement(Q,{hideLoginButton:!0},s.a.createElement("div",{className:"col-md-6 col-md-offset-3"},s.a.createElement("h2",null,"Login"),s.a.createElement("form",{name:"form",onSubmit:this.handleSubmit},s.a.createElement(X,{name:"username",label:"Username",type:"text",model:"username"}),s.a.createElement(X,{name:"password",label:"Password",type:"password",model:"password"}),s.a.createElement("div",{className:"form-group"},s.a.createElement("button",{className:"btn btn-primary"},"Login")))))}}]),t}(s.a.Component);var ke={login:G.login,logout:G.logout},Ne=Object(c.b)((function(e){return{loggingIn:e.authentication.loggingIn,formState:e.util.formState}}),ke)(je),Ce=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(N.a)(this,Object(C.a)(t).call(this,e))).state={user:{firstName:"",lastName:"",username:"",password:""},submitted:!1},a.handleChange=a.handleChange.bind(Object(z.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(z.a)(a)),a}return Object(_.a)(t,e),Object(k.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value,s=this.state.user;this.setState({user:Object(d.a)({},s,Object(V.a)({},a,n))})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state.user;t.firstName&&t.lastName&&t.username&&t.password&&this.props.register(t)}},{key:"render",value:function(){var e=this.state,t=e.user,a=e.submitted;return s.a.createElement("div",{className:"col-md-6 col-md-offset-3"},s.a.createElement("h2",null,"Register"),s.a.createElement("form",{name:"form",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"form-group"+(a&&!t.firstName?" has-error":"")},s.a.createElement("label",{htmlFor:"firstName"},"First Name"),s.a.createElement("input",{type:"text",className:"form-control",name:"firstName",value:t.firstName,onChange:this.handleChange}),a&&!t.firstName&&s.a.createElement("div",{className:"help-block"},"First Name is required")),s.a.createElement("div",{className:"form-group"+(a&&!t.lastName?" has-error":"")},s.a.createElement("label",{htmlFor:"lastName"},"Last Name"),s.a.createElement("input",{type:"text",className:"form-control",name:"lastName",value:t.lastName,onChange:this.handleChange}),a&&!t.lastName&&s.a.createElement("div",{className:"help-block"},"Last Name is required")),s.a.createElement("div",{className:"form-group"+(a&&!t.username?" has-error":"")},s.a.createElement("label",{htmlFor:"username"},"Username"),s.a.createElement("input",{type:"text",className:"form-control",name:"username",value:t.username,onChange:this.handleChange}),a&&!t.username&&s.a.createElement("div",{className:"help-block"},"Username is required")),s.a.createElement("div",{className:"form-group"+(a&&!t.password?" has-error":"")},s.a.createElement("label",{htmlFor:"password"},"Password"),s.a.createElement("input",{type:"password",className:"form-control",name:"password",value:t.password,onChange:this.handleChange}),a&&!t.password&&s.a.createElement("div",{className:"help-block"},"Password is required")),s.a.createElement("div",{className:"form-group"},s.a.createElement("button",{className:"btn btn-primary"},"Register"),s.a.createElement(W.a,{to:"/login",className:"btn btn-link"},"Cancel"))))}}]),t}(s.a.Component);var _e={register:G.register},Te=(Object(c.b)((function(e){return{registering:e.registration.registering}}),_e)(Ce),a(81),function(e){function t(e){var a;return Object(j.a)(this,t),a=Object(N.a)(this,Object(C.a)(t).call(this,e)),i.listen((function(e,t){a.props.clearAlerts()})),a}return Object(_.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props.alert;return s.a.createElement(T.c,{history:i},e.message&&s.a.createElement("div",{className:"alert ".concat(e.type)},e.message),s.a.createElement(T.d,null,s.a.createElement(B,{exact:!0,path:"/",component:we}),s.a.createElement(B,{exact:!0,path:"/dataset/:id",component:ne}),s.a.createElement(B,{exact:!0,path:"/dataset/:id/:docid",component:ye}),s.a.createElement(T.b,{path:"/login",component:Ne}),s.a.createElement(T.a,{from:"*",to:"/"})))}}]),t}(s.a.Component));var Ae={clearAlerts:A.clear},Ie=Object(c.b)((function(e){return{alert:e.alert}}),Ae)(Te);a(82);(function(){var e=window.fetch;window.fetch=function(t,a){return new Promise((function(n,s){setTimeout((function(){if(t.endsWith("/users/authenticate")&&"POST"===a.method){JSON.parse(a.body);var s={id:0,username:"test_user",firstName:"Test",lastName:"User"};n({ok:!0,text:function(){return Promise.resolve(JSON.stringify(s))}})}else if(t.endsWith("/datasetlist")&&"GET"===a.method){var r={datasetIDs:Object.keys(w)};n({ok:!0,text:function(){return Promise.resolve(JSON.stringify(r))}})}else if(t.indexOf("loaddataset")>-1&&"GET"===a.method){var o=t.split("?"),c=new URLSearchParams(o[o.length-1]).get("dataset"),l={documentIDs:Object.keys(w[c]),annotatedDocumentIDs:[]};n({ok:!0,text:function(){return Promise.resolve(JSON.stringify(l))}})}else{if(t.indexOf("loaddoc")>-1&&"GET"===a.method){var i=t.split("?"),u=new URLSearchParams(i[i.length-1]),p=u.get("dataset"),m=u.get("docid"),h=w[p][m];return h.labelset={PER:"yellow",LOC:"yellowgreen",ORG:"lightblue"},void n({ok:!0,text:function(){return Promise.resolve(JSON.stringify(h))}})}e(t,a).then((function(e){return n(e)}))}}),10)}))}})(),o.a.render(s.a.createElement(c.a,{store:S},s.a.createElement(Ie,null)),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.80e670aa.chunk.js.map